(this["webpackJsonp@dc-rich-text-editor/extension"]=this["webpackJsonp@dc-rich-text-editor/extension"]||[]).push([[0],{10:function(e,t,n){"use strict";var a=n(106);n.o(a,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return a.RichLanguageFormat})),n.o(a,"canInsert")&&n.d(t,"canInsert",(function(){return a.canInsert})),n.o(a,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return a.createStandardTools})),n.o(a,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return a.getCustomClass})),n.o(a,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return a.getDefaultClass})),n.o(a,"inBlock")&&n.d(t,"inBlock",(function(){return a.inBlock})),n.o(a,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return a.isToolEnabled}));var r=n(111);n.o(r,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return r.RichLanguageFormat})),n.o(r,"canInsert")&&n.d(t,"canInsert",(function(){return r.canInsert})),n.o(r,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return r.createStandardTools})),n.o(r,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return r.getCustomClass})),n.o(r,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return r.getDefaultClass})),n.o(r,"inBlock")&&n.d(t,"inBlock",(function(){return r.inBlock})),n.o(r,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return r.isToolEnabled}));var o=n(113);n.o(o,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return o.RichLanguageFormat})),n.o(o,"canInsert")&&n.d(t,"canInsert",(function(){return o.canInsert})),n.o(o,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return o.createStandardTools})),n.o(o,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return o.getCustomClass})),n.o(o,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return o.getDefaultClass})),n.o(o,"inBlock")&&n.d(t,"inBlock",(function(){return o.inBlock})),n.o(o,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return o.isToolEnabled}));var i=n(43);n.d(t,"canInsert",(function(){return i.a})),n.d(t,"inBlock",(function(){return i.d}));var l=n(117);n.o(l,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return l.RichLanguageFormat})),n.o(l,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return l.createStandardTools})),n.o(l,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return l.getCustomClass})),n.o(l,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return l.getDefaultClass})),n.o(l,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return l.isToolEnabled}));var s=n(119);n.o(s,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return s.RichLanguageFormat})),n.o(s,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return s.createStandardTools})),n.o(s,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return s.getCustomClass})),n.o(s,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return s.getDefaultClass})),n.o(s,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return s.isToolEnabled}))},106:function(e,t,n){"use strict";var a=n(107);n.o(a,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return a.RichLanguageFormat})),n.o(a,"canInsert")&&n.d(t,"canInsert",(function(){return a.canInsert})),n.o(a,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return a.createStandardTools})),n.o(a,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return a.getCustomClass})),n.o(a,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return a.getDefaultClass})),n.o(a,"inBlock")&&n.d(t,"inBlock",(function(){return a.inBlock})),n.o(a,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return a.isToolEnabled}));var r=n(108);n.o(r,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return r.RichLanguageFormat})),n.o(r,"canInsert")&&n.d(t,"canInsert",(function(){return r.canInsert})),n.o(r,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return r.createStandardTools})),n.o(r,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return r.getCustomClass})),n.o(r,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return r.getDefaultClass})),n.o(r,"inBlock")&&n.d(t,"inBlock",(function(){return r.inBlock})),n.o(r,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return r.isToolEnabled}));var o=n(109);n.d(t,"RichLanguageFormat",(function(){return o.a}));var i=n(110);n.o(i,"canInsert")&&n.d(t,"canInsert",(function(){return i.canInsert})),n.o(i,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return i.createStandardTools})),n.o(i,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return i.getCustomClass})),n.o(i,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return i.getDefaultClass})),n.o(i,"inBlock")&&n.d(t,"inBlock",(function(){return i.inBlock})),n.o(i,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return i.isToolEnabled}))},107:function(e,t){},108:function(e,t){},109:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.TEXT="text",e.JSON="json"}(a||(a={}))},110:function(e,t){},111:function(e,t,n){"use strict";var a=n(112);n.o(a,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return a.RichLanguageFormat})),n.o(a,"canInsert")&&n.d(t,"canInsert",(function(){return a.canInsert})),n.o(a,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return a.createStandardTools})),n.o(a,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return a.getCustomClass})),n.o(a,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return a.getDefaultClass})),n.o(a,"inBlock")&&n.d(t,"inBlock",(function(){return a.inBlock})),n.o(a,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return a.isToolEnabled}))},112:function(e,t){},113:function(e,t,n){"use strict";var a=n(114);n.o(a,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return a.RichLanguageFormat})),n.o(a,"canInsert")&&n.d(t,"canInsert",(function(){return a.canInsert})),n.o(a,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return a.createStandardTools})),n.o(a,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return a.getCustomClass})),n.o(a,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return a.getDefaultClass})),n.o(a,"inBlock")&&n.d(t,"inBlock",(function(){return a.inBlock})),n.o(a,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return a.isToolEnabled}));var r=n(115);n.o(r,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return r.RichLanguageFormat})),n.o(r,"canInsert")&&n.d(t,"canInsert",(function(){return r.canInsert})),n.o(r,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return r.createStandardTools})),n.o(r,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return r.getCustomClass})),n.o(r,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return r.getDefaultClass})),n.o(r,"inBlock")&&n.d(t,"inBlock",(function(){return r.inBlock})),n.o(r,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return r.isToolEnabled}));var o=n(116);n.d(t,"createStandardTools",(function(){return o.a}));var i=n(26);n.d(t,"getCustomClass",(function(){return i.a})),n.d(t,"getDefaultClass",(function(){return i.b})),n.d(t,"isToolEnabled",(function(){return i.c}))},114:function(e,t){},115:function(e,t){},116:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));var a=n(0),r=n.n(a),o=n(43),i=n(244),l=n(149),s=n.n(l),c=n(147),u=n.n(c),d=n(98),p=n.n(d),f=n(139),m=n.n(f),h=n(148),g=n.n(h),b=n(143),v=n.n(b),y=n(140),k=n.n(y),E=n(144),w=n.n(E),C=n(145),O=n.n(C),x=n(146),_=n.n(x),S=n(142),j=n.n(S),T=n(141),I=n.n(T),A=n(138),D=n.n(A),L=n(137),N=n.n(L),F=n(26),B=function(){return(B=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},M=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))},R=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},z=n(39),P=z.undo,W=z.redo,V=n(21),U=V.toggleMark,G=V.setBlockType,H=V.lift,$=n(46).wrapInList,J=n(178).findParentNode;function q(e,t,n,a){return{name:e,label:t,displayIcon:n,isActive:function(e){return Object(o.e)(e,a)},apply:U(a)}}function K(e){var t=this;return function(n,a,r){return M(t,void 0,void 0,(function(){var t,i,l,s,c,u;return R(this,(function(d){switch(d.label){case 0:t=Object(o.c)(n).filter((function(t){return t.mark.type===e})),i=1===t.length?t[0].mark.attrs:void 0,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.dialogs.getHyperlink(i)];case 2:return(l=d.sent()).cancel||(s={href:l.href,title:""===l.title?void 0:l.title},t.length>0?(c=n.tr,u=n.selection,""!==s.href&&(t.length<2&&!(u.from<t[0].from||u.to>t[0].to)?a(c.addMark(t[0].from,t[0].to,e.create(s))):a(c.addMark(u.from,u.to,e.create(s))))):U(e,s)(n,a)),[2];case 3:return d.sent(),[3,4];case 4:return Object(o.e)(n,e)&&a(n.tr.removeMark(t[0].from,t[0].to,e)),[2]}}))}))}}function Y(e){var t=this;return function(n,a,r){return M(t,void 0,void 0,(function(){var t,o;return R(this,(function(i){switch(i.label){case 0:t=X(n,e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.dialogs.getCode(t.params||"")];case 2:return o=i.sent(),[2,G(e,{params:o})(n,a)];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))}}function Z(e){var t=this;return function(n,a,r){return M(t,void 0,void 0,(function(){var t;return R(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r.dialogs.getImage()];case 1:return t=o.sent(),a(n.tr.replaceSelectionWith(e.createAndFill({src:t.src,title:""===t.title?void 0:t.title,alt:""===t.alt?void 0:t.alt}))),[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}}function X(e,t){if(null==e||"code_block"!==t.name)return{};var n=J((function(e){return e.attrs.params}))(e.selection);return null!=n?{params:n.node.attrs.params||""}:{params:""}}function Q(e,t,n){return G(t,B(B({},n),function(e){if(null==e)return{};var t=J((function(e){return e.attrs.align}))(e.selection);return null!=t?{align:t.node.attrs.align}:{}}(e)))}function ee(e,t){return{name:"heading_"+t,label:"Heading "+t,displayLabel:r.a.createElement("h"+t,{style:{margin:0}},"Heading "+t),apply:function(n,a){return Q(n,e.nodes.heading,{level:t})(n,a)},isEnabled:function(n){return Q(n,e.nodes.heading,{level:t})(n)},isActive:function(n,a){return!Q(n,e.nodes.heading,{level:t})(n,null)}}}function te(e,t){var n=[];if(Object(F.c)("undo",t)&&n.push({name:"undo",label:"Undo",displayIcon:r.a.createElement(N.a,null),isEnabled:function(e){return P(e)},apply:P}),Object(F.c)("redo",t)&&n.push({name:"redo",label:"Redo",displayIcon:r.a.createElement(D.a,null),isEnabled:function(e){return W(e)},apply:W}),Object(F.c)("strong",t)&&e.marks.strong&&n.push(function(e){return q("strong","Bold",r.a.createElement(m.a,null),e.marks.strong)}(e)),Object(F.c)("em",t)&&e.marks.em&&n.push(function(e){return q("em","Italic",r.a.createElement(k.a,null),e.marks.em)}(e)),Object(F.c)("code",t)&&e.marks.code&&n.push(function(e){return q("code","Code",r.a.createElement(p.a,null),e.marks.code)}(e)),Object(F.c)("link",t)&&e.marks.link&&n.push(function(e){return{name:"link",label:"Add or remove Link",displayIcon:r.a.createElement(I.a,null),isActive:function(t){return Object(o.e)(t,e.marks.link)},isEnabled:function(t){return!t.selection.empty||Object(o.c)(t).filter((function(t){return t.mark.type===e.marks.link})).length>0},apply:K(e.marks.link)}}(e)),Object(F.c)("lift",t)&&n.push({name:"lift",label:"Decrease Indentation",displayIcon:r.a.createElement(v.a,null),isVisible:function(e){return H(e)},apply:H}),Object(F.c)("bullet_list",t)&&e.nodes.bullet_list&&n.push(function(e){return{name:"bullet_list",label:"Bullet List",displayIcon:r.a.createElement(w.a,null),isEnabled:function(t){return $(e.nodes.bullet_list,{})(t)},apply:$(e.nodes.bullet_list,{})}}(e)),Object(F.c)("ordered_list",t)&&e.nodes.ordered_list&&n.push(function(e){return{name:"ordered_list",label:"Ordered List",displayIcon:r.a.createElement(O.a,null),isEnabled:function(t){return $(e.nodes.ordered_list,{})(t)},apply:$(e.nodes.ordered_list,{})}}(e)),Object(F.c)("image",t)&&e.nodes.image&&n.push(function(e){return{name:"image",label:"Insert Image from URL",displayIcon:r.a.createElement(j.a,null),apply:Z(e.nodes.image)}}(e)),Object(F.c)("blockquote",t)&&e.nodes.blockquote&&n.push(function(e){return{name:"blockquote",label:"Quote",displayIcon:r.a.createElement(_.a,null),isEnabled:function(t){return $(e.nodes.blockquote,{})(t)},apply:$(e.nodes.blockquote,{})}}(e)),Object(F.c)("heading",t)&&e.nodes.heading)for(var a=1;a<7;a++)n.push(ee(e,a));return Object(F.c)("paragraph",t)&&e.nodes.paragraph&&n.push(function(e){return G(e.nodes.paragraph),{name:"paragraph",label:"Normal text",displayLabel:r.a.createElement("p",{style:{margin:0,padding:0,display:"inline"}},"Normal text"),apply:function(t,n){return Q(t,e.nodes.paragraph)(t,n)},isEnabled:function(t){return Q(t,e.nodes.paragraph)(t)},isActive:function(t){return!Q(t,e.nodes.paragraph)(t,null)}}}(e)),Object(F.c)("code_block",t)&&e.nodes.code_block&&n.push(function(e){return{name:"code_block",label:"Code Block",displayLabel:r.a.createElement("code",null,"Code Block"),displayIcon:r.a.createElement(p.a,null),apply:Y(e.nodes.code_block),isActive:function(t,n){var a=X(t,e.nodes.code_block);return!G(e.nodes.code_block,B({},a))(t,null)}}}(e)),Object(F.c)("horizontal_rule",t)&&e.nodes.horizontal_rule&&n.push(function(e){return{name:"horizontal_rule",label:"Insert Horizontal Rule",displayIcon:r.a.createElement(u.a,null),apply:function(t,n){n(t.tr.replaceSelectionWith(e.nodes.horizontal_rule.create()))},isEnabled:function(t){return Object(o.a)(t,e.nodes.horizontal_rule)}}}(e)),Object(F.c)("clear_formatting",t)&&n.push({name:"clear_formatting",label:"Clear Formatting",displayIcon:r.a.createElement(g.a,null),apply:Object(o.b)(),isEnabled:function(e){return!0}}),Object(F.c)("ai",t)&&n.push(function(){var e=this;return{name:"ai",label:"AI Assistant",displayIcon:r.a.createElement(i.a,{variant:"dot",badgeContent:"NEW",color:"error",overlap:"rectangle"},r.a.createElement(s.a,{color:"primary"})),apply:function(t,n,a){return M(e,void 0,void 0,(function(){var e;return R(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,a.dialogs.getAIPrompt({variant:"generate"})];case 1:return e=t.sent(),[4,a.actions.insertAIContent(e)];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))},isEnabled:function(e){return!0}}}()),n}},117:function(e,t,n){"use strict";var a=n(118);n.o(a,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return a.RichLanguageFormat})),n.o(a,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return a.createStandardTools})),n.o(a,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return a.getCustomClass})),n.o(a,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return a.getDefaultClass})),n.o(a,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return a.isToolEnabled}))},118:function(e,t){},119:function(e,t,n){"use strict";var a=n(120);n.o(a,"RichLanguageFormat")&&n.d(t,"RichLanguageFormat",(function(){return a.RichLanguageFormat})),n.o(a,"createStandardTools")&&n.d(t,"createStandardTools",(function(){return a.createStandardTools})),n.o(a,"getCustomClass")&&n.d(t,"getCustomClass",(function(){return a.getCustomClass})),n.o(a,"getDefaultClass")&&n.d(t,"getDefaultClass",(function(){return a.getDefaultClass})),n.o(a,"isToolEnabled")&&n.d(t,"isToolEnabled",(function(){return a.isToolEnabled}))},120:function(e,t){},129:function(e,t){},152:function(e,t,n){"use strict";var a=n(76),r=n(75);n(129),n(73),n(74);t.default=function(e){return{language:new a.a(e),conf:r.a}}},167:function(e,t,n){e.exports=n(237)},177:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),l=(n(172),n(23)),s=n.n(l),c=n(17),u=n(28),d=n(47),p=n(48),f=n(66),m=n(89),h=n(88),g=n(55),b=n(130),v=n(24),y=n(6),k=n(19),E=Object(y.a)({root:{flex:1,display:"flex",minHeight:286,maxHeight:500},textarea:{flex:1,outline:"none",resize:"none",backgroundColor:"#f0f0f0",border:"1px solid rgba(157,162,162,.3)",padding:"10px 8px 0",fontFamily:"roboto,monospace!important",fontSize:13}})((function(e){var t=e.classes,n=e.value,a=e.onChange,o=e.readOnly,i=void 0!==o&&o,l=r.a.useCallback((function(e){a&&a(e.target.value)}),[a]);return r.a.createElement("div",{className:t.root},r.a.createElement("textarea",{readOnly:i,className:t.textarea,value:n,onChange:l}))})),w=n(64),C=(n(177),n(5).EditorState),O=n(45).EditorView,x=n(238).exampleSetup,_=n(44),S=_.tableEditing,j=_.columnResizing,T=n(51).keymap,I=n(46).sinkListItem;function A(e){return{Tab:I(e.nodes.list_item)}}var D,L=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(d.a)(this,n),a=t.call(this,e);var o=r.a.createRef();return a.state={ref:o,isLocked:e.isLocked},a}return Object(p.a)(n,[{key:"createEditorState",value:function(){var e=this.props,t=e.schema,n=e.doc,a=null!=t.nodes.table?[j(),S()]:[];return C.create({schema:t,doc:n,plugins:[].concat(a,[T(A(t))],Object(w.a)(x({schema:t,menuBar:!1})))})}},{key:"createEditorView",value:function(e){var t=this,n=this.props,a=n.onUpdateState,r=n.onChange,o=this.createEditorState(),i=this,l=new O(e,Object(c.a)(Object(c.a)({},this.props.editorViewOptions),{},{state:o,dispatchTransaction:function(e){var n=l.state.applyTransaction(e),o=n.state,i=n.transactions;return l.updateState(o),a&&a(o,l),i.some((function(e){return e.docChanged}))&&r&&r(o.doc),t.forceUpdate(),o},editable:function(){return!i.state.isLocked}}));return a&&a(l.state,l),l.dispatch=function(e){var t=this._props.dispatchTransaction;return t?t.call(this,e):this.updateState(this.state.apply(e))}.bind(l),l}},{key:"componentDidMount",value:function(){if(this.state.ref&&!this.state.editorView){var e=this.createEditorView(this.state.ref.current);this.setState({editorView:e})}}},{key:"componentDidUpdate",value:function(e,t,n){this.props.isLocked!==e.isLocked&&this.setState(Object(c.a)(Object(c.a)({},this.state),{},{isLocked:this.props.isLocked}))}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root,ref:this.state.ref})}}]),n}(r.a.Component),N=Object(y.a)({root:{width:"100%",minHeight:250,maxHeight:600,overflowY:"scroll"}})(L),F=n(32),B=n(2);!function(e){e.EDIT="edit",e.CODE="code"}(D||(D={}));var M=Object(y.a)({root:{display:"flex"},button:{outline:"none",transition:"color 0.2s linear,border-bottom-color 0.2s linear",height:40,cursor:"pointer",background:"transparent",border:"0 solid transparent",borderTop:"3px solid transparent",borderBottom:"3px solid transparent",fontSize:13,padding:"0 15px",color:"#999999",fontWeight:"bold"},selected:{color:"#1EA7FD",borderBottomColor:"#1EA7FD"}})((function(e){var t=e.classes,n=e.onChange,a=e.language,o=e.disableCodeView,i=e.disableEditView,l=r.a.useState(i?D.CODE:D.EDIT),s=Object(k.a)(l,2),c=s[0],u=s[1],d=r.a.useCallback((function(e){u(e),n&&n(e)}),[u]),p=r.a.useCallback((function(e,n){return r.a.createElement("button",{onClick:function(){return d(n)},className:Object(B.a)(t.button,Object(F.a)({},t.selected,c===n)),type:"button",role:"tab"},e)}),[c,d]);return r.a.createElement("div",{className:t.root},!i&&p("Edit",D.EDIT),!o&&p(a||"Code",D.CODE))})),R=n(10),z=n(58),P=n(303),W=r.a.createContext({}),V=n(302),U=Object(y.a)({root:{margin:"1px"}})((function(e){var t=e.toolName,n=e.classes,a=r.a.useContext(W),o=a.getToolState,i=a.applyTool,l=o?o(t):null,s=r.a.useCallback((function(e){var n=document.activeElement;i&&i(t),null!=n&&setTimeout((function(){return n.focus()}),0)}),[t,i]);return l&&l.visible?r.a.createElement(V.a,{className:Object(B.a)(n.root),onMouseDown:s,size:"small",disabled:!l.enabled||e.isLocked,color:l.active?"primary":"default",title:l.label},l.displayIcon?l.displayIcon:l.label):null})),G=n(245),H=n(316),$=Object(y.a)({value:{fontSize:14,paddingLeft:6,paddingRight:6,fontWeight:"unset"}})((function(e){var t=e.toolNames,n=e.classes,a=e.label,o=r.a.useContext(W),i=o.getToolState,l=o.applyTool,s=t.map((function(e){return i?i(e):null})).filter((function(e){return null!=e})),c=s.filter((function(e){return e.active})),u=c&&c.length>1?c.find((function(e){return/inline_styles/.test(e.name)}))||c[0]:c.find((function(e){return e.active})),d=u?u.name:"",p=r.a.useCallback((function(e){l&&l(e.target.value)}),[l]),f=r.a.useCallback((function(e){if(!e)return a||"";var t=i?i(e):void 0;return t||(t={label:e}),t.displayLabel?r.a.cloneElement(t.displayLabel,{className:n.value}):t.label}),[i]);return 0===s.length?null:r.a.createElement(G.a,{value:d,onChange:p,renderValue:f,displayEmpty:!0,onMouseDown:function(e){return e.preventDefault()},disabled:e.isLocked},s.map((function(e){return r.a.createElement(H.a,{value:e.name,key:e.name,onMouseDown:function(e){return e.preventDefault()}},e.displayLabel?e.displayLabel:r.a.createElement("span",null,e.label))})))})),J=Object(y.a)({root:{display:"flex",alignItems:"center"},divider:{verticalAlign:"top",display:"inline-flex",height:13,lineHeight:13,borderRight:"1px solid rgb(218, 220, 224)",margin:"9px 4px"},empty:{display:"none"}})((function(e){var t=e.children,n=e.classes;return r.a.createElement("div",{className:Object(B.a)(n.root,Object(F.a)({},n.empty,!t))},t,r.a.createElement("div",{className:n.divider}))})),q=r.a.createContext({params:{},isLocked:!1,setIsLocked:function(e){},proseMirrorEditorView:void 0,dialogs:{},actions:{},languages:{},language:{}}),K=q;function Y(){return Object(a.useContext)(q)}var Z=Object(y.a)({root:{minHeight:35,borderBottom:"1px solid rgb(218, 220, 224)"}})((function(e){var t=e.classes,n=e.layout,a=e.toolbarState,o=Y(),i=function t(n){switch(n.type){case"button":return r.a.createElement(U,{toolName:n.toolName,isLocked:e.isLocked});case"dropdown":return r.a.createElement($,{toolNames:n.toolNames,label:n.label,isLocked:e.isLocked});case"group":return-1!==n.children.findIndex((function(e){return"button"!==e.type||function(e){var t=null==a?null:a.toolStates[e.toolName];return null==t||t.visible}(e)}))?r.a.createElement(J,null,n.children.map((function(e){return t(e)}))):null;default:return null}};return r.a.createElement(W.Provider,{value:{applyTool:function(e){if(a){var t=a.tools.find((function(t){return t.name===e})),n=Object.keys(a.toolStates).filter((function(e){return/inline_styles/.test(e)&&a.toolStates[e].active}));if(t){if(n&&n.length){var r=a.tools.find((function(e){return"clear_formatting"===e.name}));r&&r.apply(o.proseMirrorEditorView.state,o.proseMirrorEditorView.dispatch,o)}t.apply(o.proseMirrorEditorView.state,o.proseMirrorEditorView.dispatch,o)}}},getToolState:function(e){if(a)return a.toolStates[e]}}},r.a.createElement(P.a,{className:t.root,disableGutters:!0},n.map((function(e){return i(e)}))))})),X=[{type:"group",children:[{type:"button",toolName:"undo"},{type:"button",toolName:"redo"}]},{type:"dropdown",label:"Styles",toolNames:["paragraph","heading_1","heading_2","heading_3","heading_4","heading_5","heading_6","code_block"]},{type:"group",children:[{type:"button",toolName:"strong"},{type:"button",toolName:"em"},{type:"button",toolName:"soft_hyphen"},{type:"button",toolName:"link"},{type:"button",toolName:"anchor"}]},{type:"group",children:[{type:"button",toolName:"align_left"},{type:"button",toolName:"align_center"},{type:"button",toolName:"align_right"},{type:"button",toolName:"align_justify"}]},{type:"group",children:[{type:"button",toolName:"lift"},{type:"button",toolName:"bullet_list"},{type:"button",toolName:"ordered_list"}]},{type:"group",children:[{type:"button",toolName:"dc-image-link"},{type:"button",toolName:"image"},{type:"button",toolName:"dc-content-link"},{type:"button",toolName:"blockquote"},{type:"button",toolName:"code_block"},{type:"button",toolName:"horizontal_rule"},{type:"button",toolName:"table_create"}]},{type:"group",children:[{type:"button",toolName:"table_row_add"},{type:"button",toolName:"table_row_delete"},{type:"button",toolName:"table_col_add"},{type:"button",toolName:"table_col_delete"},{type:"button",toolName:"table_delete"},{type:"button",toolName:"clear_formatting"}]},{type:"button",toolName:"ai"}],Q=n(151);var ee=n(307),te=n(318),ne=n(304),ae=n(244),re=n(305),oe=n(289),ie=n(306),le=n(308),se=n(158),ce=n(309),ue=n(314),de=[{label:"Improve this",prompt:"Improve this"},{label:"Shorten this",prompt:"Shorten this"},{label:"Expand this",prompt:"Expand this"}],pe=function(){function e(t){Object(d.a)(this,e),this.params=void 0,this.params=t}return Object(p.a)(e,[{key:"getKey",value:function(){var e,t,n;return null===(e=this.params)||void 0===e||null===(t=e.tools)||void 0===t||null===(n=t.ai)||void 0===n?void 0:n.key}},{key:"getModel",value:function(){var e,t,n;return(null===(e=this.params)||void 0===e||null===(t=e.tools)||void 0===t||null===(n=t.ai)||void 0===n?void 0:n.model)||"gpt-3.5-turbo"}},{key:"getEditPrompts",value:function(){var e,t,n;return(null===(e=this.params)||void 0===e||null===(t=e.tools)||void 0===t||null===(n=t.ai)||void 0===n?void 0:n.editPrompts)||de}}]),e}(),fe=[];["Write me a blog post about...","Write a buying guide for...","Write an article about...","Create a list of..."].forEach((function(e){new Array(e.length).fill("").forEach((function(t,n){fe.push(e.slice(0,n))})),new Array(10).fill("").forEach((function(){fe.push(e)}))}));var me=function(e){var t=Object(a.useState)(0),n=Object(k.a)(t,2),o=n[0],i=n[1];return Object(a.useEffect)((function(){var e=o,t=setInterval((function(){e++,i(e)}),50);return function(){clearInterval(t)}})),r.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"777",height:"428",fill:"none",version:"1.1",viewBox:"0 0 777 428"},e),r.a.createElement("mask",{id:"mask0_1924_96628",style:{maskType:"alpha"},width:"777",height:"428",x:"0",y:"0",maskUnits:"userSpaceOnUse"},r.a.createElement("rect",{width:"777",height:"428",fill:"#fff",rx:"20"})),r.a.createElement("g",{mask:"url(#mask0_1924_96628)"},r.a.createElement("path",{fill:"url(#paint0_linear_1924_96628)",d:"M809.39 284.915a30.001 30.001 0 0014.971-25.964V156.712a30 30 0 00-14.969-25.962L721.216 79.7a30 30 0 00-30.061 0l-88.185 51.05A30 30 0 00588 156.713v102.238a30 30 0 0014.972 25.964l88.185 51.042a30.002 30.002 0 0030.057-.001l88.176-51.041z"}),r.a.createElement("g",{style:{mixBlendMode:"screen"}},r.a.createElement("path",{fill:"#FFA980",d:"M683.518 246.474A25 25 0 00696 224.833v-70.665c0-8.923-4.757-17.17-12.481-21.639L622.523 97.24a25 25 0 00-25.038 0l-61.003 35.289A25 25 0 00524 154.169v70.664a25.003 25.003 0 0012.483 21.641l61.003 35.284a25.001 25.001 0 0025.035-.001l60.997-35.283z"})),r.a.createElement("path",{stroke:"url(#paint1_linear_1924_96628)",strokeWidth:"0.5",d:"M614.185 214.168L530.185 306.168",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint2_linear_1924_96628)",strokeWidth:"0.5",d:"M530.122 306.781L746.122 427.781",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint3_linear_1924_96628)",strokeWidth:"0.5",d:"M530 306.749L618 306.749",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint4_linear_1924_96628)",strokeWidth:"0.5",d:"M582.137 272.208L530.137 306.208",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint5_linear_1924_96628)",strokeWidth:"0.5",d:"M530.187 306.833L637.187 427.833",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint6_linear_1924_96628)",strokeWidth:"0.5",d:"M571.279 112.668L681.885 169.994",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint7_linear_1924_96628)",strokeWidth:"0.5",d:"M682.494 169.896L743.466 -70.061",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint8_linear_1924_96628)",strokeWidth:"0.5",d:"M682.494 170.022L659.718 85.02",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint9_linear_1924_96628)",strokeWidth:"0.5",d:"M635.637 128.601L681.937 170.03",opacity:"0.5"}),r.a.createElement("path",{stroke:"url(#paint10_linear_1924_96628)",strokeWidth:"0.5",d:"M682.528 169.819L771.711 35.148",opacity:"0.5"}),r.a.createElement("g",{opacity:"0.95"},r.a.createElement("g",{style:{mixBlendMode:"screen"}},r.a.createElement("rect",{width:"264",height:"42",x:"524.5",y:"167.499",fill:"#EFF7FB",rx:"3.5"}),r.a.createElement("rect",{width:"264",height:"42",x:"524.5",y:"167.499",stroke:"url(#paint11_linear_1924_96628)",rx:"3.5"})),r.a.createElement("path",{fill:"#216083",d:"M548.126 181.336c.248-.639 1.152-.639 1.399 0l.305.789a8.003 8.003 0 004.574 4.573l.788.305c.639.248.639 1.152 0 1.399l-.788.306a8 8 0 00-4.574 4.573l-.305.789c-.247.639-1.151.639-1.399 0l-.305-.789a7.998 7.998 0 00-4.573-4.573l-.789-.306c-.639-.247-.639-1.151 0-1.399l.789-.305a8.001 8.001 0 004.573-4.573l.305-.789z"}),r.a.createElement("path",{fill:"#216083",d:"M537.914 179.204a.5.5 0 01.933 0l.277.717c.305.787.928 1.41 1.715 1.715l.717.277a.5.5 0 010 .933l-.717.277a3.004 3.004 0 00-1.715 1.715l-.277.717a.5.5 0 01-.933 0l-.277-.717a3.004 3.004 0 00-1.715-1.715l-.717-.277a.5.5 0 010-.933l.717-.277a3.004 3.004 0 001.715-1.715l.277-.717z"}),r.a.createElement("path",{fill:"#216083",d:"M540.051 191.313a.5.5 0 01.933 0l.277.717a2.999 2.999 0 001.715 1.715l.717.278a.5.5 0 010 .933l-.717.277a3.002 3.002 0 00-1.715 1.715l-.277.717a.5.5 0 01-.933 0l-.277-.717a3.002 3.002 0 00-1.715-1.715l-.717-.277a.5.5 0 010-.933l.717-.278a2.999 2.999 0 001.715-1.715l.277-.717z"}),r.a.createElement("text",{xmlSpace:"preserve",style:{},x:"576.763",y:"193.268",fill:"#216083",fillOpacity:"1",fontFamily:"Arial",fontSize:"12",fontStretch:"normal",fontStyle:"normal",fontVariant:"normal",fontWeight:"bold"},r.a.createElement("tspan",{x:"576.763",y:"193.268",style:{fontFamily:'roboto, "sans-serif"'},fill:"#216083",fillOpacity:"1",fontFamily:"roboto",fontSize:"12",fontStretch:"normal",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal"},function(e){return fe[e%fe.length]}(o)))),r.a.createElement("path",{fill:"url(#paint12_linear_1924_96628)",d:"M560.515 331.335A15 15 0 00568 318.353v-26.705a15 15 0 00-7.484-12.981l-22.999-13.316a15 15 0 00-15.031-.001l-23.002 13.317A15 15 0 00492 291.648v26.705c0 5.353 2.853 10.3 7.485 12.982l23.002 13.314a15 15 0 0015.03 0l22.998-13.314z",opacity:"0.45"}),r.a.createElement("path",{fill:"url(#paint13_linear_1924_96628)",d:"M555.013 230.2A17.999 17.999 0 00564 214.619V165.38a18 18 0 00-8.986-15.58l-42.498-24.587a17.997 17.997 0 00-18.027-.001L451.986 149.8A18.002 18.002 0 00443 165.381v49.238a17.998 17.998 0 008.988 15.581l42.502 24.584a18 18 0 0018.025 0l42.498-24.584z",opacity:"0.25"}),r.a.createElement("g",{fill:"#EFF7FB",opacity:"0.75"},r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"240",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"248",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"256",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"264",rx:"2"}),r.a.createElement("rect",{width:"76",height:"4",x:"625",y:"272",rx:"2"})),r.a.createElement("g",{fill:"#EFF7FB",opacity:"0.45"},r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"116",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"124",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"132",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"140",rx:"2"}),r.a.createElement("rect",{width:"76",height:"4",x:"625",y:"148",rx:"2"})),r.a.createElement("g",{fill:"#B4C5F2",opacity:"0.75"},r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"287",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"295",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"303",rx:"2"}),r.a.createElement("rect",{width:"123",height:"4",x:"625",y:"311",rx:"2"}),r.a.createElement("rect",{width:"76",height:"4",x:"625",y:"319",rx:"2"})),r.a.createElement("g",{fill:"#B4C5F2",opacity:"0.8"},r.a.createElement("path",{d:"M655.072 45.965c.494-1.278 2.303-1.278 2.797 0l1.683 4.346a11.999 11.999 0 006.859 6.86l4.347 1.682c1.278.495 1.278 2.304 0 2.798l-4.347 1.682a11.998 11.998 0 00-6.859 6.86l-1.683 4.347c-.494 1.278-2.303 1.278-2.797 0l-1.683-4.347a11.997 11.997 0 00-6.86-6.86l-4.346-1.682c-1.278-.494-1.278-2.303 0-2.798l4.346-1.682a11.997 11.997 0 006.86-6.86l1.683-4.346z"}),r.a.createElement("path",{d:"M638.072 68.421c.248-.639 1.152-.639 1.399 0l1.021 2.637a5.999 5.999 0 003.43 3.43l2.637 1.02c.639.248.639 1.152 0 1.4l-2.637 1.02a5.999 5.999 0 00-3.43 3.43l-1.021 2.637c-.247.64-1.151.64-1.399 0l-1.02-2.637a6.002 6.002 0 00-3.43-3.43l-2.637-1.02c-.639-.248-.639-1.152 0-1.4l2.637-1.02a6.001 6.001 0 003.43-3.43l1.02-2.637z"}),r.a.createElement("path",{d:"M632.895 40.807c.247-.639 1.151-.639 1.398 0l1.021 2.637a6.002 6.002 0 003.43 3.43l2.637 1.02c.639.248.639 1.152 0 1.4l-2.637 1.02a6.001 6.001 0 00-3.43 3.43l-1.021 2.637c-.247.639-1.151.639-1.398 0l-1.021-2.637a6.001 6.001 0 00-3.43-3.43l-2.637-1.02c-.639-.248-.639-1.152 0-1.4l2.637-1.02a6.002 6.002 0 003.43-3.43l1.021-2.637z"}))),r.a.createElement("defs",{id:"defs176"},r.a.createElement("linearGradient",{id:"paint0_linear_1924_96628",x1:"541.41",x2:"759.841",y1:"207.827",y2:"185.701",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop104",stopColor:"#F88B8B"}),r.a.createElement("stop",{id:"stop106",offset:"0.483",stopColor:"#D7A7BD"}),r.a.createElement("stop",{id:"stop108",offset:"1",stopColor:"#B4C5F2"})),r.a.createElement("linearGradient",{id:"paint1_linear_1924_96628",x1:"532.44",x2:"612.22",y1:"301.843",y2:"214.466",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop111",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop113",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint2_linear_1924_96628",x1:"737.338",x2:"532.19",y1:"424.293",y2:"309.372",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop116",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop118",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint3_linear_1924_96628",x1:"614.67",x2:"531.091",y1:"307.999",y2:"307.999",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop121",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop123",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint4_linear_1924_96628",x1:"531.42",x2:"580.808",y1:"303.875",y2:"271.584",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop126",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop128",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint5_linear_1924_96628",x1:"632.202",x2:"530.578",y1:"424.083",y2:"309.162",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop131",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop133",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint6_linear_1924_96628",x1:"677.124",x2:"572.076",y1:"168.935",y2:"114.488",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop136",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop138",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint7_linear_1924_96628",x1:"742.37",x2:"684.461",y1:"-60.673",y2:"167.228",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop141",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop143",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint8_linear_1924_96628",x1:"661.788",x2:"683.419",y1:"87.913",y2:"168.644",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop146",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop148",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint9_linear_1924_96628",x1:"679.351",x2:"635.377",y1:"169.393",y2:"130.047",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop151",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop153",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint10_linear_1924_96628",x1:"769.378",x2:"684.676",y1:"40.934",y2:"168.839",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop156",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop158",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint11_linear_1924_96628",x1:"778.972",x2:"527.286",y1:"209.999",y2:"209.999",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop161",stopColor:"#fff"}),r.a.createElement("stop",{id:"stop163",offset:"1",stopColor:"#F88B8B"})),r.a.createElement("linearGradient",{id:"paint12_linear_1924_96628",x1:"494.876",x2:"567.057",y1:"260.999",y2:"260.999",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop166",stopColor:"#F88B8B"}),r.a.createElement("stop",{id:"stop168",offset:"1",stopColor:"#B4C5F2"})),r.a.createElement("linearGradient",{id:"paint13_linear_1924_96628",x1:"447.579",x2:"562.499",y1:"119.998",y2:"119.998",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{id:"stop171",stopColor:"#B4C5F2"}),r.a.createElement("stop",{id:"stop173",offset:"1",stopColor:"#F88B8B"}))))},he=function(e){var t=e.variant,n=void 0===t?"generate":t,o=e.onSubmit,i=e.classes,l=Object(a.useState)(""),c=Object(k.a)(l,2),d=c[0],p=c[1],f={generate:{placeholder:"Write a blog post about...",button:"Generate"},rewrite:{placeholder:"Rewrite this content in the style of...",button:"Rewrite"}}[n],m=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(d);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{style:{paddingBottom:0}},"AI Assistant",r.a.createElement(ae.a,{style:{marginLeft:"20px",lineHeight:"16px"},badgeContent:"BETA",color:"error",anchorOrigin:{horizontal:"right",vertical:"top"},className:i.betaBadge},"\xa0")),r.a.createElement(re.a,null,r.a.createElement(oe.a,{value:d,placeholder:f.placeholder,onChange:function(e){p(e.target.value)},onKeyUp:function(e){"Enter"!==e.key&&13!==e.keyCode||m()},InputProps:{startAdornment:r.a.createElement(ie.a,{position:"start"},r.a.createElement(ee.a,{color:"primary",fontSize:"large"})),endAdornment:r.a.createElement(ie.a,{position:"end"},r.a.createElement(le.a,{onClick:m},f.button))},fullWidth:!0,variant:"outlined"}),r.a.createElement(se.a,{variant:"caption"},"Powered by ChatGPT API")),r.a.createElement(ce.a,null))},ge=function(e){var t=e.onClose,n=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{style:{paddingBottom:0}},"AI Assistant",r.a.createElement(ae.a,{style:{marginLeft:"20px",lineHeight:"16px"},badgeContent:"BETA",color:"error",anchorOrigin:{horizontal:"right",vertical:"top"},className:n.betaBadge},"\xa0")),r.a.createElement(re.a,null,r.a.createElement(se.a,{variant:"body2",className:n.configureContent},"Our AI assistant, powered by ChatGPT, is designed to simplify and improve your content production and editing workflow. It offers a user-friendly interface to help generate and edit content using natural language.",r.a.createElement("br",null),r.a.createElement("br",null),"Visit the link below to find out how to enable the AI assistant."),r.a.createElement(me,{className:n.configureGraphic})),r.a.createElement(ce.a,null,r.a.createElement(oe.a,{className:n.getStartedAction,value:"https://github.com/amplience/dc-extension-rich-text#ai-assistant"}),r.a.createElement(le.a,{className:n.cancelAction,onClick:t},"Not at the moment")))},be=Object(y.a)({root:{},prompt:{},configure:{"& .MuiDialogContent-root, & .MuiDialogTitle-root, & .MuiDialogActions-root":{backgroundColor:"#002C42",color:"white",paddingLeft:30,paddingRight:30},"& .MuiDialog-paper":{height:290,overflow:"hidden"},"& .MuiDialogActions-root":{justifyContent:"flex-start",paddingBottom:30},"& .MuiDialogTitle-root":{paddingTop:30}},configureContent:{maxWidth:"50%"},configureGraphic:{width:550,position:"absolute",right:0,top:-60},betaBadge:{"& .MuiBadge-badge":{backgroundColor:"#f78a8b"}},getStartedAction:{backgroundColor:"rgba(255,255,255,0.9)",borderRadius:20,padding:"5px 15px"},cancelAction:{color:"white"}})((function(e){var t=e.open,n=e.onClose,a=e.classes,o=new pe(e.params),i=o.getKey()?"prompt":"configure";return r.a.createElement(ue.a,{maxWidth:"sm",fullWidth:!0,open:t,onClose:n,"aria-labelledby":"form-dialog-title",className:Object(B.a)(a.root,{prompt:a.prompt,configure:a.configure}[i])},"prompt"===i&&r.a.createElement(he,Object.assign({},e,{configuration:o})),"configure"===i&&r.a.createElement(ge,Object.assign({},e,{configuration:o,onClose:n})))})),ve=[{name:"gpt-3.5-turbo",version:"gpt-3.5",maxTokens:4096},{name:"gpt-3.5-turbo-16k",version:"gpt-3.5",maxTokens:16384},{name:"gpt-4",version:"gpt-4",maxTokens:8192},{name:"gpt-4-32k",version:"gpt-4",maxTokens:32768}];function ye(e,t){var n=ve.find((function(t){return t.name===e}));if(n&&t>n.maxTokens){var a=ve.find((function(e){return e.version===n.version&&e.maxTokens>t}));return(null===a||void 0===a?void 0:a.name)||e}return e}function ke(e,t,n,a){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(u.a)(s.a.mark((function e(t,n,a,r){var o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 2048,o=n.messages.map((function(e){return e.content.length})).reduce((function(e,t){return e+t}),0)/4,i=2048+o,l="",e.next=6,Object(te.a)("https://api.openai.com/v1/chat/completions",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.getKey())},method:"POST",body:JSON.stringify(Object(c.a)({model:ye(t.getModel(),i),max_tokens:2048,stream:!0},n)),onmessage:function(e){try{if("[DONE]"===e.data)return void a(l,!0);var t=JSON.parse(e.data).choices[0].delta.content;void 0!==t&&a(l+=t,!1)}catch(n){}},onopen:function(e){return Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===(n=e.headers.get("content-type"))||void 0===n?void 0:n.startsWith("application/json"))){t.next=8;break}return t.t0=r,t.next=5,e.json();case 5:return t.t1=t.sent,(0,t.t0)(t.t1),t.abrupt("return");case 8:if(null===n||n.startsWith("text/event-stream")){t.next=10;break}throw new Error("Expected content-type to be 'text/event-stream', Actual: ".concat(n));case 10:case"end":return t.stop()}}),t)})))()},onerror:function(e){throw e}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we=function(){function e(){Object(d.a)(this,e),this.context=void 0}return Object(p.a)(e,[{key:"setRichTextEditorContext",value:function(e){this.context=e}},{key:"formatRewritePrompt",value:function(e,t,n){return"This is the original content I am starting with: \n---\n".concat(e,"\n---\nThis is the selection I want to update:\n---\n").concat(t,"\n---\nThis is the description of the change I want to make:\n---\n").concat(n)}},{key:"rewriteSelectedContentUsingAI",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,o,i,l,c,u,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g.a.addAction("rewriteSelectedContentUsingAI",{prompt:t})}catch(s){}return n=this.context||{},a=n.proseMirrorEditorView,r=n.language,o=a.state,i=o.selection.from,l=o.selection.to,c=o.doc.cut(i,l),u=r.serializeMarkdown(o.doc),d=r.serializeMarkdown(c),"# Say Cheese: The Ultimate Guide to Cheese\n\nCheese, the dairy product that has a special place in everyone's hearts, is a versatile ingredient that has been enjoyed for thousands of years across the globe. You can melt it, slice it, crumble it, or grate it - whatever way you choose, cheese always adds an extra dimension to any dish. In this ultimate guide to cheese, you'll learn everything you need to know about the world's favorite dairy product.\n\n## History of Cheese\n\nThe origin of cheese can be traced back to ancient times. Even before recorded history, it is believed that the process of cheesemaking was discovered accidentally by storing milk in animal bladders or stomachs, causing it to curdle and form cheese. Cheese quickly became a staple in the diets of people around the world and is now enjoyed in cultures all across the globe.\n\n## Types of Cheese\n\nThere are thousands of different types of cheese, each with its own flavor, texture, and aroma. From mild and creamy Brie to sharp and nutty Cheddar, there is a cheese for every taste preference. Some popular varieties of cheese include:\n\n* Cheddar\n\n* Brie\n\n* Mozzarella\n\n* Parmesan\n\n* Feta\n\n* Blue Cheese\n\n* Gouda\n\n## Conclusion\n\nCheese is a delicious and versatile ingredient that can be enjoyed in a variety of ways. From its humble beginnings thousands of years ago to its place as one of the world's most popular dairy products, cheese has a special place in the hearts of people around the world. So, let's raise a glass of wine and say cheese!","You can melt it, slice it, crumble it, or grate it - whatever way you choose, cheese always adds an extra dimension to any dish.","You can melt, slice, crumble, or grate it - cheese enhances any dish.",e.abrupt("return",this.handleInsertAIContent({messages:[{role:"system",content:"I want you to act as an editor for marketing copy.\n  - You will receive the original markdown document, followed by a selection from the document that the user wants to change, followed by a description of the change you should make.\n  - You should reply with a markdown formatted string that can replace the provided selection.\n\nDo not produce more content than you were originally provided unless specifically requested. \n  - If the selection includes only a header, reply with only a header. \n  - If the selection includes only a bullet point, reply with only a bullet point. \n  - If the selection includes only one line, reply with only one line. \n  - If the user asks you to make the selection longer, you can expand on the provided selection, but do not produce any additional elements.\n  - For example, if given a header, and asked to make it longer, you can add more text to the header, but you should not add any more lines.\n\nIf the user requests a change that you cannot produce a reasonable replacement for, you should respond with an error. \n  - Return errors sparingly, try to make a best effort attempt at handling the user's request whenever possible.\n  - If you return an error, prefix it with `[DIALOG]`. \n  - For example, if the user provides the selection `Banana` and asks you to shorten it, you might reply: `[DIALOG] I can't shorten \"Banana\" any further.`.\n\nDo not converse with the user. \n  - Do not ask clarifying questions. \n  - Do not add conversational preamble such as `Sure, I can do that`, or `Ok, here's the change`."},{role:"user",content:this.formatRewritePrompt("# Say Cheese: The Ultimate Guide to Cheese\n\nCheese, the dairy product that has a special place in everyone's hearts, is a versatile ingredient that has been enjoyed for thousands of years across the globe. You can melt it, slice it, crumble it, or grate it - whatever way you choose, cheese always adds an extra dimension to any dish. In this ultimate guide to cheese, you'll learn everything you need to know about the world's favorite dairy product.\n\n## History of Cheese\n\nThe origin of cheese can be traced back to ancient times. Even before recorded history, it is believed that the process of cheesemaking was discovered accidentally by storing milk in animal bladders or stomachs, causing it to curdle and form cheese. Cheese quickly became a staple in the diets of people around the world and is now enjoyed in cultures all across the globe.\n\n## Types of Cheese\n\nThere are thousands of different types of cheese, each with its own flavor, texture, and aroma. From mild and creamy Brie to sharp and nutty Cheddar, there is a cheese for every taste preference. Some popular varieties of cheese include:\n\n* Cheddar\n\n* Brie\n\n* Mozzarella\n\n* Parmesan\n\n* Feta\n\n* Blue Cheese\n\n* Gouda\n\n## Conclusion\n\nCheese is a delicious and versatile ingredient that can be enjoyed in a variety of ways. From its humble beginnings thousands of years ago to its place as one of the world's most popular dairy products, cheese has a special place in the hearts of people around the world. So, let's raise a glass of wine and say cheese!","You can melt it, slice it, crumble it, or grate it - whatever way you choose, cheese always adds an extra dimension to any dish.","Shorten this")},{role:"assistant",content:"You can melt, slice, crumble, or grate it - cheese enhances any dish."},{role:"user",content:this.formatRewritePrompt(u,d,t)}]}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertAIContent",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g.a.addAction("insertAIContent",{prompt:t})}catch(n){}return e.abrupt("return",this.handleInsertAIContent({messages:[{role:"system",content:"I want you to act as a copywriter that produces markdown formatted content for marketing.\n  - You will receive a prompt from the user.\n  - You should reply with a markdown document that can be used in marketing materials.\n  - Do not include hyperlinks in your response.\n  - Do not include images in your response.\n\nIf the user's prompt asks for only a portion of a document, you should return only that portion.\n  - If the user asks for only a title, produce only a title.\n  - If the user asks for only a paragraph, produce only a paragraph.\n  - If the user asks for only a bullet list, produce only a bullet list.\n\nIf the user provides a prompt that you cannot produce a document for, you should return an error.\n  - Prefix any errors with [DIALOG].\n  - For example, if the user's prompt is `Hello?`, then you might respond with `[DIALOG] Please describe the content you want to generate.`\n\nDo not converse with the user.\n  - Do not ask clarifying questions.\n  - Do not add conversational preamble such as `Sure, I can do that`, or `Ok, here's the change`.\n  - Do not include [DIALOG] if you've successfully produced a document."},{role:"user",content:t}]}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleInsertAIContent",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,o,i,l,c,u,d,p,f,m,h,g,b,v,y,k,E,w,C,O=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=this.context,f=p.proseMirrorEditorView,m=p.setIsLocked,h=p.params,g=p.language,b=new pe(h),v=f.dispatch,y=f.state,m(!0),k=null!==(n=null===(a=y.selection)||void 0===a?void 0:a.from)&&void 0!==n?n:y.doc.content.size,E=(null===(o=y.selection)||void 0===o?void 0:o.to)||k,w=y.doc.resolve(k,E),"paragraph"===(null===w||void 0===w||null===(i=w.parent)||void 0===i||null===(l=i.type)||void 0===l?void 0:l.name)&&0===(null===w||void 0===w||null===(c=w.parent)||void 0===c||null===(u=c.content)||void 0===u?void 0:u.size)&&k--,e.prev=10,e.next=13,ke(b,t,(function(e,t){var n,a=0===e.length,o=e.startsWith("[DIALOG]"),i=!t&&e.length<"[DIALOG]".length&&e==="[DIALOG]".slice(0,e.length);if(o){var l=e.slice("[DIALOG]".length);return C?C.updateContent(l):C=O.context.dialogs.alert({title:"AI Assistant",icon:r.a.createElement(ee.a,null),severity:"info",content:l}),void m(!1)}if(!a&&!i){var s=g.parseMarkdown(e.trim()).content;1===s.content.length&&(s=s.content[0].content);var c=y.tr.replaceWith(k,E,s),u=v(c);y=u,E=Math.max(null===(n=y.selection)||void 0===n?void 0:n.to,k+s.size)}}),(function(e){var t,n;(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)&&O.context.dialogs.alert({title:"AI Assistant",icon:r.a.createElement(ee.a,null),severity:"error",content:null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.message})}));case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(10);case 17:null===(d=this.context)||void 0===d||d.setIsLocked(!1);case 18:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ce=n(240),Oe=n(243),xe=/^[a-zA-Z][\w:.\-]*$/;var _e=function(e){var t=e.open,n=e.onClose,a=e.onSubmit,o=e.value?e.value.existing:new Set,i=r.a.useState({value:""}),l=Object(k.a)(i,2),s=l[0],u=l[1],d=r.a.useState(),p=Object(k.a)(d,2),f=p[0],m=p[1];null!=e.value&&null!=e.value.value&&f!==e.value.value&&(u(e.value.value),m(e.value.value));var h=function(e){return function(e,t){return null==e||0===e.length?"ID cannot be empty.":xe.test(e)?t.has(e)?"ID is already in use.":void 0:"Invalid ID."}(e,o)},g=h(s.value),b=r.a.useState(g),v=Object(k.a)(b,2),y=v[0],E=v[1];g!==y&&E(g);var w=r.a.useCallback((function(e,t){var n=Object(c.a)(Object(c.a)({},s),{},Object(F.a)({},e,t));u(n);var a=h(n.value);E(a)}),[s,u,E]),C=function(){u({value:""})},O=r.a.useCallback((function(){C(),n()}),[u,n]),x=r.a.useCallback((function(){C(),a(s)}),[s,u,a]);return r.a.createElement(ue.a,{maxWidth:"md",fullWidth:!0,open:t,onClose:n,"aria-labelledby":"form-dialog-title"},r.a.createElement(ne.a,{id:"form-dialog-title"},"Anchor"),r.a.createElement(re.a,null,r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(oe.a,{error:void 0!==y,autoFocus:!0,id:"value",label:"Anchor ID",type:"input",required:!0,fullWidth:!0,value:s.value,onChange:function(e){return w("value",e.target.value)},helperText:y}),r.a.createElement(Oe.a,null,"Example: paragraph-4"))),r.a.createElement(ce.a,null,r.a.createElement(le.a,{onClick:O,color:"primary"},"Cancel"),r.a.createElement(le.a,{disabled:void 0!==y,onClick:x,color:"primary"},"Confirm")))},Se=/^[a-zA-Z]?[\w:.\-\/]*$/,je=function(e){var t=e.open,n=e.onClose,a=e.onSubmit,o=r.a.useState(""),i=Object(k.a)(o,2),l=i[0],s=i[1],c=r.a.useState(""),u=Object(k.a)(c,2),d=u[0],p=u[1],f=r.a.useState(),m=Object(k.a)(f,2),h=m[0],g=m[1];h!==e.value&&(s(e.value||""),g(e.value));var b=r.a.useCallback((function(e){s(e||"");var t,n=(t=e,Se.test(t)?"":"Value contains invalid characters");p(n)}),[l,s,p]),v=function(){s("")},y=r.a.useCallback((function(){v(),n()}),[s,n]),E=r.a.useCallback((function(){v(),a(l)}),[l,s,a]);return r.a.createElement(ue.a,{maxWidth:"md",fullWidth:!0,open:t,onClose:n,"aria-labelledby":"form-dialog-title"},r.a.createElement(ne.a,{id:"form-dialog-title"},"Code block"),r.a.createElement(re.a,null,r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(oe.a,{error:!!d,helperText:d,autoFocus:!0,id:"href",label:"Language",type:"input",fullWidth:!0,value:l,onChange:function(e){return b(e.target.value||"")}}),r.a.createElement(Oe.a,null,"The language to use for syntax highlighting, e.g. javascript or html"))),r.a.createElement(ce.a,null,r.a.createElement(le.a,{onClick:y,color:"primary"},"Cancel"),r.a.createElement(le.a,{disabled:!!d,onClick:E,color:"primary"},"Confirm")))};var Te=function(e){var t=e.open,n=e.onClose,a=e.onSubmit,o=r.a.useState({href:"",title:""}),i=Object(k.a)(o,2),l=i[0],s=i[1],u=r.a.useState(),d=Object(k.a)(u,2),p=d[0],f=d[1];null!=e.value&&p!==e.value&&(s(e.value),f(e.value));var m=r.a.useState(!1),h=Object(k.a)(m,2),g=h[0],b=h[1],v=r.a.useCallback((function(e,t){var n=Object(c.a)(Object(c.a)({},l),{},Object(F.a)({},e,t));s(n),b(function(e){return null!=e&&e.length>0}(n.href))}),[l,s,b]),y=function(){s({href:"",title:""}),f(void 0)},E=r.a.useCallback((function(){y(),void 0===p?n():a(Object(c.a)(Object(c.a)({},p),{},{cancel:!0}))}),[p,f,a]),w=r.a.useCallback((function(){y(),n()}),[s,n]),C=r.a.useCallback((function(){y(),a(l)}),[l,s,a]);return r.a.createElement(ue.a,{maxWidth:"md",fullWidth:!0,open:t,onClose:E,"aria-labelledby":"form-dialog-title"},r.a.createElement(ne.a,{id:"form-dialog-title"},"Hyperlink"),r.a.createElement(re.a,null,r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(oe.a,{autoFocus:!0,id:"href",label:"Web Address",type:"input",required:!0,fullWidth:!0,value:l.href,onChange:function(e){return v("href",e.target.value)}}),r.a.createElement(Oe.a,null,"Example: https://www.storefront.com/black-friday")),r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(oe.a,{id:"title",label:"Title",type:"input",fullWidth:!0,value:l.title,onChange:function(e){return v("title",e.target.value)}}),r.a.createElement(Oe.a,null,"Example: Black Friday Sale"))),r.a.createElement(ce.a,null,r.a.createElement(le.a,{onClick:w,color:"primary"},"Clear"),r.a.createElement(le.a,{disabled:!g,onClick:C,color:"primary"},"Confirm")))};var Ie=function(e){var t=e.open,n=e.onClose,a=e.onSubmit,o=r.a.useState({src:"",alt:"",title:""}),i=Object(k.a)(o,2),l=i[0],s=i[1],u=r.a.useState(!1),d=Object(k.a)(u,2),p=d[0],f=d[1],m=r.a.useCallback((function(e,t){var n=Object(c.a)(Object(c.a)({},l),{},Object(F.a)({},e,t));s(n),f(function(e){return null!=e&&e.length>0}(n.src))}),[l,s,f]),h=function(){s({src:"",alt:"",title:""})},g=r.a.useCallback((function(){h(),n()}),[s,n]),b=r.a.useCallback((function(){h(),a(l)}),[l,s,a]);return r.a.createElement(ue.a,{maxWidth:"md",fullWidth:!0,open:t,onClose:n,"aria-labelledby":"form-dialog-title"},r.a.createElement(ne.a,{id:"form-dialog-title"},"Insert Image from URL"),r.a.createElement(re.a,null,r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(oe.a,{autoFocus:!0,id:"src",label:"Image Address",type:"input",required:!0,fullWidth:!0,value:l.src,onChange:function(e){return m("src",e.target.value)}}),r.a.createElement(Oe.a,null,"Example: https://cdn.storefront.com/image.jpg")),r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(oe.a,{id:"title",label:"Image Title",type:"input",fullWidth:!0,value:l.title,onChange:function(e){return m("title",e.target.value)}}),r.a.createElement(Oe.a,null,"Example: Black Friday Sale")),r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(oe.a,{id:"alt",label:"Image Alternative Text",type:"input",fullWidth:!0,value:l.alt,onChange:function(e){return m("alt",e.target.value)}}),r.a.createElement(Oe.a,null,"Example: Black Friday Sale"))),r.a.createElement(ce.a,null,r.a.createElement(le.a,{onClick:g,color:"primary"},"Cancel"),r.a.createElement(le.a,{disabled:!p,onClick:b,color:"primary"},"Insert")))},Ae=r.a.createContext({}),De=n(315),Le=n(14),Ne=n(310),Fe=Object(y.a)((function(e){return{root:Object(c.a)(Object(c.a)({},e.typography.body2),{},{display:"flex",flexDirection:"row",maxWidth:300,borderRadius:e.shape.borderRadius,backgroundColor:"transparent",padding:"6px 16px"}),success:{color:Object(Le.a)(e.palette.success.main,.6),backgroundColor:Object(Le.e)(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},info:{color:Object(Le.a)(e.palette.info.main,.6),backgroundColor:Object(Le.e)(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},warning:{color:Object(Le.a)(e.palette.warning.main,.6),backgroundColor:Object(Le.e)(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},error:{color:Object(Le.a)(e.palette.error.main,.6),backgroundColor:Object(Le.e)(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},title:{fontWeight:e.typography.fontWeightMedium},header:{display:"flex",flexDirection:"row"},content:{padding:"8px 0"},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}))((function(e){var t=e.classes,n=e.children,a=e.severity,o=e.title,i=e.icon,l=e.onClose;return r.a.createElement("div",{className:Object(B.a)(t.root,{info:t.info,success:t.success,error:t.error,warning:t.warning}[a])},r.a.createElement("div",{className:t.icon},i),r.a.createElement("div",{className:t.content},r.a.createElement("div",{className:t.header},r.a.createElement(se.a,{variant:"body1",className:t.title},o)),n),r.a.createElement("div",{className:t.action},r.a.createElement(V.a,{onClick:l,size:"small",color:"inherit"},r.a.createElement(Ne.a,null))))})),Be=0,Me=function(e){var t=e.children,n=e.params,a=r.a.useState(),o=Object(k.a)(a,2),i=o[0],l=o[1],s=r.a.useReducer((function(e,t){switch(t.type){case"ADD_ALERT":return[].concat(Object(w.a)(e),[t.alert]);case"REMOVE_ALERT":var n=e.findIndex((function(e){return e.id===t.id}));return-1!==n&&e.splice(n,1),Object(w.a)(e);case"UPDATE_ALERT_CONTENT":var a=e.find((function(e){return e.id===t.id}));return a&&(a.content=t.content),Object(w.a)(e)}return e}),[]),u=Object(k.a)(s,2),d=u[0],p=u[1],f=r.a.useCallback((function(){i&&i.reject(),l(void 0)}),[i,l]),m=r.a.useCallback((function(e){i&&i.resolve(e),l(void 0)}),[i,l]),h=r.a.useCallback((function(e,t,n){return new Promise((function(a,r){l({type:e,resolve:a,reject:r,value:t,options:n})}))}),[l]),g=r.a.useContext(v.d).sdk,b=r.a.useCallback((function(e,t){p({type:"UPDATE_ALERT_CONTENT",id:e,content:t})}),[p]),y=r.a.useCallback((function(e){p({type:"REMOVE_ALERT",id:e})}),[p]),E={getAnchor:function(e,t){return h("anchor",{value:t,existing:e})},getCode:function(e){return h("code",e)},getHyperlink:function(e){return h("hyperlink",e)},getImage:function(e){return h("image")},getDcImageLink:function(e){return g?g.mediaLink.getImage():Promise.reject()},getDcContentLink:function(e,t){return g?g.contentLink.get(e):Promise.reject()},getAIPrompt:function(e){return h("ai_prompt",void 0,e)},alert:function(e){var t=Object(c.a)({id:"".concat(Be++)},e);return t.updateContent=function(e){b(t.id,e)},p({type:"ADD_ALERT",alert:t}),t}};return r.a.createElement(Ae.Provider,{value:{dialogs:E}},t,r.a.createElement(_e,{value:null!=i?i.value:void 0,open:null!=i&&"anchor"===i.type,onClose:f,onSubmit:m}),r.a.createElement(je,{value:null!=i?i.value:void 0,open:null!=i&&"code"===i.type,onClose:f,onSubmit:m}),r.a.createElement(Te,{value:null!=i?i.value:void 0,open:null!=i&&"hyperlink"===i.type,onClose:f,onSubmit:m}),r.a.createElement(Ie,{open:null!=i&&"image"===i.type,onClose:f,onSubmit:m}),r.a.createElement(be,Object.assign({open:null!=i&&"ai_prompt"===i.type,onClose:f,onSubmit:m,params:n},(null===i||void 0===i?void 0:i.options)||{})),d.map((function(e){return r.a.createElement(De.a,{key:e.id,onClose:function(){return y(e.id)},open:!0,autoHideDuration:6e3,anchorOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement(Fe,{severity:e.severity,title:e.title,icon:e.icon,onClose:function(){return y(e.id)}},e.content))})))},Re=n(311),ze=n(317),Pe=Object(y.a)((function(e){return{root:{borderTop:"1px solid rgb(218, 220, 224)",position:"absolute",background:"white",paddingTop:"10px",width:"100%",bottom:0},chip:{background:e.palette.background.paper,"& .MuiChip-icon":{color:e.palette.primary.main}}}}))((function(e){var t=e.classes,n=Y(),a=n.params,o=n.actions,i=n.dialogs,l=n.proseMirrorEditorView,c=new pe(a),d=Object(R.isToolEnabled)("ai",a),p=Boolean(c.getKey()),f=c.getEditPrompts(),m=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.rewriteSelectedContentUsingAI(t.prompt);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getAIPrompt({variant:"rewrite"});case 2:return t=e.sent,e.next=5,o.rewriteSelectedContentUsingAI(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d&&p?r.a.createElement("div",{className:t.root,style:{display:(null===l||void 0===l?void 0:l.state.selection.empty)?"none":"block"}},r.a.createElement(Re.a,{direction:"row",spacing:1,container:!0},f.map((function(e){return r.a.createElement(Re.a,{key:e.label,item:!0},r.a.createElement(ze.a,{className:t.chip,icon:r.a.createElement(ee.a,{color:"primary"}),label:e.label,variant:"outlined",onClick:function(){return m(e)}}))})),r.a.createElement(Re.a,{item:!0},r.a.createElement(ze.a,{className:t.chip,icon:r.a.createElement(ee.a,{color:"primary"}),label:"Custom...",variant:"outlined",onClick:function(){return h()}})))):r.a.createElement(r.a.Fragment,null)})),We=Object(y.a)({root:{width:"100%",height:"100%",display:"flex"},frame:{flex:1,display:"flex",flexDirection:"column",border:"1px solid rgba(157,162,162,.3)",borderRadius:5,padding:"0 10px 10px 10px"}})((function(e){var t=e.classes,n=e.languages,o=e.language,i=void 0===o?"markdown":o,l=e.toolbarLayout,s=e.disableToolbar,u=void 0!==s&&s,d=e.disableCodeView,p=void 0!==d&&d,f=e.readOnlyCodeView,m=void 0!==f&&f,h=e.editorViewOptions,g=e.value,b=e.onChange,v=e.params,y=Object(a.useState)(!1),w=Object(k.a)(y,2),C=w[0],O=w[1],x=Object(a.useState)(void 0),_=Object(k.a)(x,2),S=_[0],j=_[1],T=r.a.useContext(Ae).dialogs,I=Object(a.useState)(new we),A=Object(k.a)(I,1)[0],L=n||{markdown:Object(z.b)({})};if(!L[i])throw new Error("Unable to find language ".concat(e.language));var F=L[i],B=F.language,P=F.conf,W={isLocked:C,setIsLocked:O,proseMirrorEditorView:S,dialogs:T,actions:A,params:v,languages:L,language:B};A.setRichTextEditorContext(W);var V=r.a.useState(D.EDIT),U=Object(k.a)(V,2),G=U[0],H=U[1],$=r.a.useState((function(){if(g)return P.format===R.RichLanguageFormat.JSON?JSON.stringify(g,null,3):g})),J=Object(k.a)($,2),q=J[0],Y=J[1],ee=r.a.useState((function(){if(g)try{return B.parse(g)}catch(e){}})),te=Object(k.a)(ee,2),ne=te[0],ae=te[1],re=r.a.useCallback((function(e){if(Y(e),P.format===R.RichLanguageFormat.JSON)try{e=JSON.parse(e)}catch(n){return}b&&b(e);try{var t=B.parse(e);ae(t)}catch(n){}}),[P,Y,ae,b]),oe=r.a.useCallback((function(e){ae(e);try{var t=B.serialize(e);P.format===R.RichLanguageFormat.JSON?Y(JSON.stringify(t,null,3)):Y(t),b&&b(t)}catch(n){}}),[P,ae,Y]),ie=r.a.useState(),le=Object(k.a)(ie,2),se=le[0],ce=le[1],ue=l||X,de=r.a.useCallback((function(e,t){j(t),ce(function(e,t,n){var a,r={},o=Object(Q.a)(e);try{for(o.s();!(a=o.n()).done;){var i=a.value,l=Object(c.a)({active:!1,enabled:!0,visible:!0},i);i.isActive&&(l.active=i.isActive(t,n)),i.isVisible&&(l.visible=i.isVisible(t,n)),i.isEnabled&&(l.enabled=i.isEnabled(t,n)),r[i.name]=l}}catch(s){o.e(s)}finally{o.f()}return{tools:e,toolStates:r}}(B.tools,e,W))}),[B,ce]);return r.a.createElement(K.Provider,{value:W},r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.frame},r.a.createElement(M,{onChange:H,language:B.label,disableCodeView:p}),G===D.EDIT?r.a.createElement("div",null,!u&&r.a.createElement(Z,{toolbarState:se,layout:ue,isLocked:W.isLocked}),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(N,{editorViewOptions:h,schema:B.schema,onChange:oe,onUpdateState:de,doc:ne,isLocked:W.isLocked}),r.a.createElement(Pe,null))):r.a.createElement(E,{value:q,onChange:re,readOnly:W.isLocked||m}))))})),Ve=n(152),Ue=n(56),Ge=Object(y.a)({root:{width:"100%"},title:{padding:"7px 0",minHeight:"20px",color:"#666",fontSize:"13px",boxSizing:"border-box","-webkit-font-smoothing":"auto",fontFamily:"roboto,sans-serif!important"}})((function(e){var t,n,a,o=e.schema,i=e.value,l=e.onChange,s=e.classes,u=(null===o||void 0===o||null===(t=o["ui:extension"])||void 0===t?void 0:t.params)||{},d=r.a.useContext(v.d).sdk,p=r.a.useContext(Ae).dialogs;u=d?Object(c.a)(Object(c.a)(Object(c.a)({},u),null===(n=d.params)||void 0===n?void 0:n.installation),null===(a=d.params)||void 0===a?void 0:a.instance):u;var f=r.a.useMemo((function(){var e={useClasses:u.useClasses,classOverride:u.classOverride,dialogs:p,actions:new we,dynamicContent:{stagingEnvironment:d?d.stagingEnvironment:void 0},tools:u.tools};return e.tools&&!e.tools.blacklist&&(e.tools.blacklist=["inline_styles"]),e}),[d,p,u]),m=r.a.useMemo((function(){return{markdown:Object(z.b)(f),json:Object(Ve.default)(f)}}),[]),h=(u.language,r.a.useMemo((function(){return{nodeViews:{"dc-image-link":function(e,t,n){return new Ue.d(e,t,n,f)},"dc-content-link":function(e,t,n){return new Ue.b(e,t,n,f)}}}}),[d,f]));return r.a.createElement("div",{className:s.root},!!u.styles&&r.a.createElement("style",{dangerouslySetInnerHTML:{__html:u.styles}}),!!u.stylesheet&&r.a.createElement("link",{rel:"stylesheet",href:u.stylesheet}),!!u.title&&r.a.createElement("div",{className:s.title},u.title),r.a.createElement(We,{languages:m,language:u.language,editorViewOptions:h,toolbarLayout:u.toolbar?u.toolbar.layout:void 0,disableToolbar:u.toolbar?u.toolbar.disabled:void 0,disableCodeView:u.codeView?u.codeView.disabled:void 0,readOnlyCodeView:u.codeView?u.codeView.readOnly:void 0,onChange:l,params:u,value:i}))})),He=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={connected:!1},a.handleValueChange=a.handleValueChange.bind(Object(f.a)(a)),a.handleChooseLink=a.handleChooseLink.bind(Object(f.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.handleConnect(),this.handleInitRum()}},{key:"handleInitRum",value:function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DATADOG_TOKEN,t=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DATADOG_APP_ID,n=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DATADOG_ENV_ID;e&&t&&n&&(g.a.init({applicationId:t,clientToken:e,env:n,site:"datadoghq.com",service:"dc-extension-rich-text",version:"0.1.0",trackResources:!0,trackLongTasks:!0,trackUserInteractions:!0,defaultPrivacyLevel:"allow",sampleRate:100,useCrossSiteSessionCookie:!0}),g.a.startSessionReplayRecording())}},{key:"handleConnect",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,r,o,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)();case 2:return(i=e.sent).frame.startAutoResizer(),i.contentItem.getCurrent().then((function(e){g.a.setGlobalContext({deliveryId:e.deliveryId})})),l=Object(c.a)(Object(c.a)(Object(c.a)({},null===(t=i.field)||void 0===t||null===(n=t.schema)||void 0===n||null===(a=n["ui:extension"])||void 0===a?void 0:a.params),null===(r=i.params)||void 0===r?void 0:r.installation),null===(o=i.params)||void 0===o?void 0:o.instance),e.next=8,i.field.getValue();case 8:u=e.sent,this.setState({sdk:i,connected:!0,value:u,params:l});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleValueChange",value:function(e){this.state.connected&&this.state.sdk&&this.state.sdk.field.setValue(e)}},{key:"handleChooseLink",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{href:"",title:""});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.connected,n=e.value,a=e.sdk;return r.a.createElement("div",{className:"App"},t&&a?r.a.createElement("div",null,Object(v.i)(r.a.createElement(v.d.Provider,{value:{sdk:a}},r.a.createElement(Me,{params:this.state.params},r.a.createElement(Ge,{onChange:this.handleValueChange,value:n,schema:a.field.schema}))))):r.a.createElement("div",null,"\xa0"))}}]),n}(r.a.Component);n(236);i.a.render(r.a.createElement(He,null),document.getElementById("root"))},26:function(e,t,n){"use strict";function a(e,t){return(!t.tools||!t.tools.blacklist||-1===t.tools.blacklist.indexOf(e))&&(!t.tools||!t.tools.whitelist||-1!==t.tools.whitelist.indexOf(e))}n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/;function o(e,t){if(t&&t.classOverride){var n=t.classOverride[e];return n&&r.test(n)?n:e}return e}function i(e,t){if(t&&t.classOverride){var n=t.classOverride;return Object.keys(n).find((function(t){return n[t]===e}))||e}return e}},43:function(e,t,n){"use strict";function a(e){return e.selection.$from.depth>1}function r(e,t){var n=e.selection,a=n.from,r=n.$from,o=n.to;return n.empty?t.isInSet(e.storedMarks||r.marks()):e.doc.rangeHasMark(a,o,t)}function o(e){var t=e.selection,n=t.$from,a=t.$to,r=[];return e.doc.nodesBetween(n.pos,a.pos,(function(e,t){e.marks.forEach((function(n){return r.push({from:t,to:t+e.nodeSize,mark:n})}))})),r}function i(e,t){for(var n=e.selection.$from,a=n.depth;a>=0;a--){var r=n.index(a);if(n.node(a).canReplaceWith(r,r,t))return!0}return!1}function l(){return function(e,t){var n=e.selection,a=n.$cursor,r=n.ranges;if(t)if(a)for(var o=0,i=e.storedMarks||a.marks();o<i.length;o++){var l=i[o];t(e.tr.removeStoredMark(l.type))}else{for(var s=e.tr,c=0,u=r;c<u.length;c++)for(var d=u[c],p=0,f=Object.keys(e.schema.marks);p<f.length;p++){var m=f[p];s.removeMark(d.$from.pos,d.$to.pos,e.schema.marks[m])}t(s)}return!0}}n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l}))},56:function(e,t,n){"use strict";function a(){return{content:"block",group:"block",defining:!0,attrs:{value:{}},nodeSize:1,draggable:!0,atom:!0,parseDOM:[{tag:"dc-image-link[data-dc-image-link]",getAttrs:function(e){return{value:JSON.parse(e.getAttribute("data-dc-image-link"))}}}],toDOM:function(e){var t=e.attrs.value;return["dc-image-link",{"data-dc-image-link":JSON.stringify(t)}]}}}n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return x})),n.d(t,"e",(function(){return L}));var r=n(0),o=n.n(r),i=n(16),l=n.n(i),s=n(24),c=n(6),u=n(2),d=function(){return(d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},f=Object(c.a)({root:{display:"block",width:"100%",minHeight:150,margin:"0 10px 10px 0",position:"relative"},content:{},"empty-slot":{},"populated-slot":{}})((function(e){var t,n=e.classes,a=e.children,r=e.className,i=e.variant,l=void 0===i?"empty":i,s=e.aspectRatio,c=p(e,["classes","children","className","variant","aspectRatio"]),f=o.a.useMemo((function(){if(s){var e=s.split(":");if(2===e.length)return Math.round(Number(e[1])/Number(e[0])*100)+"%"}}),[s]);return o.a.createElement("div",d({},c,{className:Object(u.a)(n.root,(t={},t[n["empty-slot"]]="empty-slot"===l,t[n["populated-slot"]]="populated-slot"===l,t),r)}),s?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"block",paddingTop:f}},"\xa0"),o.a.createElement("div",{className:Object(u.a)(n.content)},a)):o.a.createElement("div",{className:Object(u.a)(n.content)},a))})),m=n(312),h=n(153),g=n.n(h),b=Object(c.a)({root:{"&$broken, &$invalid":{background:"#e5e5e5"}},image:{maxWidth:"100%"},loading:{},broken:{},invalid:{},statusIcons:{top:0,left:0,right:0,bottom:0,display:"flex",position:"absolute",alignItems:"center",alignContent:"center",flexDirection:"row",justifyContent:"center"}})((function(e){var t,n=e.node,a=e.onDelete,r=e.classes,i=e.options,l=n.attrs.value,c=o.a.useState(!1),d=c[0],p=c[1],h=o.a.useState(!1),b=h[0],v=h[1],y=o.a.useCallback((function(){v(!0)}),[v]),k=o.a.useCallback((function(){p(!0),v(!1)}),[p,v]),E=o.a.useCallback((function(){p(!1),v(!1)}),[p,v]),w=l&&l.endpoint&&l.name,C=s.e;return o.a.createElement("div",{className:Object(u.a)(r.root,(t={},t[r.broken]=d,t[r.loading]=b,t[r.invalid]=!w,t))},o.a.createElement(f,{variant:"populated-slot",aspectRatio:d||b||!w?"3:1":void 0},!!w&&o.a.createElement("img",{className:r.image,src:"//"+(i&&i.dynamicContent&&i.dynamicContent.stagingEnvironment?i.dynamicContent.stagingEnvironment:l.defaultHost)+"/i/"+l.endpoint+"/"+encodeURIComponent(l.name),onLoadStart:y,onError:k,onLoad:E,alt:""}),o.a.createElement("div",{className:r.statusIcons},b?o.a.createElement(m.a,null):!(!d&&w)&&o.a.createElement(g.a,{fontSize:"large"})),o.a.createElement(s.a,{variant:"populated-slot"},o.a.createElement(C,{variant:"dark",onClick:a},s.c))))})),v=function(){function e(e,t,n,a){void 0===a&&(a={}),this.node=e,this.view=t,this.getPos=n,this.options=a,this.dom=document.createElement("div"),this.handleDelete=this.handleDelete.bind(this),this.render()}return e.prototype.handleDelete=function(){var e=this.getPos(),t=this.view.state.tr.delete(e,e+this.node.nodeSize);this.view.dispatch(t)},e.prototype.render=function(){l.a.render(Object(s.i)(o.a.createElement(b,{options:this.options,node:this.node,onDelete:this.handleDelete})),this.dom)},e}();function y(){return{content:"block",group:"block",defining:!0,attrs:{value:{}},nodeSize:1,draggable:!0,atom:!0,parseDOM:[{tag:"dc-content-link[data-dc-content-link]",getAttrs:function(e){return{value:JSON.parse(e.getAttribute("data-dc-content-link"))}}}],toDOM:function(e){var t=e.attrs.value;return["dc-content-link",{"data-dc-content-link":JSON.stringify(t)}]}}}var k=[{schema:"https://www.bbr.com/content-type/audio-podcast",name:"Audio Podcast"},{schema:"https://www.bbr.com/content-type/banner",name:"Banner"},{schema:"https://www.bbr.com/content-type/body-image",name:"Body Image"},{schema:"https://www.bbr.com/content-type/hero-banner",name:"Hero Banner"},{schema:"https://www.bbr.com/content-type/social-sharing",name:"Social Sharing"},{schema:"https://www.bbr.com/content-type/video-amplience",name:"Video Amplience"},{schema:"https://www.bbr.com/content-type/video-youtube",name:"Video Youtube"},{schema:"https://www.bbr.com/content-type/quote",name:"Quote"},{schema:"https://www.bbr.com/content-type/recipe",name:"Recipe"},{schema:"https://www.bbr.com/content-type/feature-block",name:"Feature Block"},{schema:"https://www.bbr.com/content-type/article-card-list",name:"Article Card List"},{schema:"https://www.bbr.com/content-type/social-networks",name:"Social Networks"},{schema:"https://www.bbr.com/content-type/contact-points",name:"Contact Points"},{schema:"https://www.bbr.com/content-type/category-hero-banner",name:"Category Hero Banner"},{schema:"https://www.bbr.com/content-type/accordion",name:"Accordion"},{schema:"https://www.bbr.com/content-type/image-half-width-with-text",name:"Image Half Width"},{schema:"https://www.bbr.com/content-type/table",name:"Table"}],E=[{virtual:"mwm9783993hk12s0dgnki3n7z.staging.bigcontent.io",env:"https://app.amplience.net/content/#!/bbrsandbox/authoring/content-item/edit/"},{virtual:"18psqzjt574qb1t9cwcxkoaze2.staging.bigcontent.io",env:"https://app.amplience.net/content/#!/bbrtest/authoring/content-item/edit/"},{virtual:"175uz9hadktmi1jo9js8h0ebin.staging.bigcontent.io",env:"https://app.amplience.net/content/#!/bbrprodsupp/authoring/content-item/edit/"},{virtual:"1o6pu8rbwadqi1h1g5kiosiurx.staging.bigcontent.io",env:"https://app.amplience.net/content/#!/bbrprod/authoring/content-item/edit/"}],w=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))},C=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},O=Object(c.a)({root:{"&$broken, &$invalid":{background:"#e5e5e5"},boxShadow:"0 1px 5px 0 rgba(23,32,44,.2), 0 2px 2px 0 rgba(23,32,44,.1), 0 3px 1px -2px rgba(23,32,44,.1)"},invalid:{},content:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"50%"},contentName:{margin:"20px",fontsize:"20px"},statusIcons:{top:0,left:0,right:0,bottom:0,display:"flex",position:"absolute",alignItems:"center",alignContent:"center",flexDirection:"row",justifyContent:"center"}})((function(e){var t,n=e.node,a=e.onDelete,r=e.contentTypeName,i=e.editLink,l=e.classes,c=e.options,d=n.attrs.value,p=d&&d.id&&d.contentType,m=c.tools&&c.tools["dc-content-link"]?c.tools["dc-content-link"]:void 0,h=m?function(e){if(void 0!==e){if(Array.isArray(e)){var t={cards:{},icons:{},aspectRatios:{}};return e.forEach((function(e){e.card&&(t.cards[e.id]=e.card),e.icon&&(t.icons[e.id]=e.icon),e.aspectRatio&&t.aspectRatios&&(t.aspectRatios[e.id]=e.aspectRatio)})),t}return e}}(m.contentTypeSettings):void 0,g=h&&p?Object(s.h)(h,d.contentType):void 0,b=h&&p?Object(s.g)(h,d.contentType):void 0,v=h&&h.aspectRatios&&p?function(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++){var r=a[n];if("*"===r||r===t)return e[r]}}(h.aspectRatios,d.contentType):void 0,y=s.e;return o.a.createElement("div",{className:Object(u.a)(l.root,(t={},t[l.invalid]=!p,t))},o.a.createElement(f,{variant:"populated-slot",aspectRatio:v||"3:1"},o.a.createElement("div",{className:Object(u.a)(l.content),style:{backgroundImage:"url("+(g||s.b)+")"}},o.a.createElement("div",{className:Object(u.a)(l.contentName),style:{textAlign:"center"}},"Content Type: ",r),!!(b&&c&&c.dynamicContent&&c.dynamicContent.stagingEnvironment)&&o.a.createElement(s.f,{template:b,params:{contentItemId:d.id,stagingEnvironment:c.dynamicContent.stagingEnvironment}})),o.a.createElement("div",null,o.a.createElement(s.a,{variant:"populated-slot"},o.a.createElement(y,{variant:"dark"},o.a.createElement("a",{href:i,target:"_blank",style:{cursor:"pointer",height:"24px",display:"flex"}},o.a.createElement("svg",{version:"1.1",id:"Layer_1_cache446",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"24px",viewBox:"0 0 32 32.07",enableBackground:"new 0 0 32 32.07",xmlSpace:"preserve",preserveAspectRatio:"xMidYMid meet",focusable:"false",style:{verticalAlign:"middle"}},o.a.createElement("polygon",{fill:"#FFFFFF",points:"4.124,22.244 3.375,28.656 9.773,27.906"}),o.a.createElement("rect",{x:"11.119",y:"6.823",transform:"matrix(-0.7072 -0.707 0.707 -0.7072 13.8315 39.5483)",fill:"#FFFFFF",width:"7.972",height:"20.174"}),o.a.createElement("path",{fill:"#FFFFFF",d:"M20.397,5.976l5.658,5.658c0,0,2.055-2.08,2.637-2.659c0.581-0.581,0.516-1.514,0-2.03\n                                        c-0.518-0.519-3.105-3.109-3.597-3.599c-0.573-0.574-1.542-0.521-2.062,0C22.512,3.868,20.397,5.976,20.397,5.976z"})))),o.a.createElement(y,{variant:"dark",onClick:a},s.c)))))}));var x=function(){function e(e,t,n,a){void 0===a&&(a={}),this.node=e,this.view=t,this.getPos=n,this.options=a,this.dom=document.createElement("div"),this.handleDelete=this.handleDelete.bind(this),this.beforeRender(),this.render()}return e.prototype.handleDelete=function(){return w(this,void 0,void 0,(function(){var e,t;return C(this,(function(n){return e=this.getPos(),t=this.view.state.tr.delete(e,e+this.node.nodeSize),this.view.dispatch(t),[2]}))}))},e.prototype.beforeRender=function(){var e,t;return w(this,void 0,void 0,(function(){var n=this;return C(this,(function(a){return this.editLink=(null===(e=E.find((function(e){var t;return e.virtual===(null===(t=n.options.dynamicContent)||void 0===t?void 0:t.stagingEnvironment)})))||void 0===e?void 0:e.env)+this.node.attrs.value.id,this.contentTypeName=null===(t=k.find((function(e){return e.schema===n.node.attrs.value.contentType})))||void 0===t?void 0:t.name,[2]}))}))},e.prototype.render=function(){l.a.render(Object(s.i)(o.a.createElement(O,{options:this.options,node:this.node,contentTypeName:this.contentTypeName,editLink:this.editLink,onDelete:this.handleDelete})),this.dom)},e}(),_=n(10),S=n(155),j=n.n(S),T=n(154),I=n.n(T),A=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))},D=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function L(e,t){var n=[];return Object(_.isToolEnabled)("dc-image-link",t)&&e.nodes["dc-image-link"]&&n.push(function(e){var t=this,n=e.nodes["dc-image-link"];return{name:"dc-image-link",label:"Insert Image",displayIcon:o.a.createElement(I.a,null),isEnabled:function(e){return!Object(_.inBlock)(e)},apply:function(e,a,r){return A(t,void 0,void 0,(function(){var t;return D(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r.dialogs.getDcImageLink()];case 1:return t=o.sent(),a(e.tr.replaceSelectionWith(n.createAndFill({value:t}))),[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}}}(e)),Object(_.isToolEnabled)("dc-content-link",t)&&e.nodes["dc-content-link"]&&t.tools&&t.tools["dc-content-link"]&&t.tools["dc-content-link"].contentTypes&&t.tools["dc-content-link"].contentTypes&&n.push(function(e,t){var n=this,a=e.nodes["dc-content-link"];return{name:"dc-content-link",label:"Insert Content",displayIcon:o.a.createElement(j.a,null),isEnabled:function(e){return!Object(_.inBlock)(e)},apply:function(e,r,o){return A(n,void 0,void 0,(function(){var n;return D(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,o.dialogs.getDcContentLink(t)];case 1:return n=i.sent(),r(e.tr.replaceSelectionWith(a.createAndFill({value:n}))),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))}))}}}(e,t.tools["dc-content-link"].contentTypes)),n}},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var a=n(10),r=n(290),o=n(291),i=n(292),l=n(293),s=n(0),c=n.n(s),u=function(){return(u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function d(e){var t=new Set,n=[];return e.doc.nodesBetween(e.selection.from,e.selection.to,(function(e,a,r,o){e.isTextblock&&!t.has(e)&&(n.push({node:e,pos:a,start:0,depth:0}),t.add(e))})),Array.from(n)}function p(e,t,n){var a=d(e),r=e.tr;return a.forEach((function(e){var t=e.node,a=e.pos;r=r.setNodeMarkup(a,t.type,u(u({},t.attrs),{align:n}))})),t&&t(r),!0}function f(e,t,n){var a=d(e),r=!1;return a.forEach((function(e){(a[0].node.attrs.align||"left")!==n&&(r=!0)})),0!==a.length&&!r}function m(e,t){return d(e).length>0}var h={group:"inline",inline:!0,attrs:{value:{}},parseDOM:[{tag:"a[id]",getAttrs:function(e){return{value:JSON.parse(e.getAttribute("id"))}}}],toDOM:function(e){var t=e.attrs.value;return["a",{id:JSON.stringify(t)},t]}},g=n(294),b=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))},v=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function y(e){var t=this;return function(n,a,r){return b(t,void 0,void 0,(function(){var t,o,i,l,s,c;return v(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),t=new Set,o=function(e){"anchor"===e.type.name?t.add(e.attrs.value):e.forEach(o)},n.doc.forEach(o),i=n.selection,l=i.$from,s=i.$to,n.doc.nodesBetween(l.pos,s.pos,(function(e,n){"anchor"===e.type.name&&t.delete(e.attrs.value)})),[4,r.dialogs.getAnchor(t)];case 1:return c=u.sent(),a(n.tr.replaceSelectionWith(e.createAndFill({value:c.value}))),[3,3];case 2:return u.sent(),[3,3];case 3:return[2]}}))}))}}var k={anchor:function(e,t){var n={};t.attrs.value&&(n.id=t.attrs.value);var a=Object.keys(n).map((function(e){return e+'="'+n[e]+'"'})).join(" ");e.write("<a "+a+"></a>")}},E=function(){return(E=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},w={attrs:{class:{default:""},style:{default:""}},group:"inline",parseDOM:[{tag:"span",getAttrs:function(e){return{class:e.getAttribute("class"),style:e.attributes.style?e.attributes.style.value:void 0}}}],toDOM:function(e){return["span",E(E({},e.attrs.style?{style:e.attrs.style}:{}),{class:e&&e.attrs&&e.attrs.class?e.attrs.class:""}),0]}},C=function(){return(C=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function O(e,t,n,a){var r;return n>t&&e.doc.nodesBetween(t,n,(function(e){return!a.isInSet(e.marks)||(r=e.marks.find((function(e){return e.type===a})),!1)})),r}function x(e,t){return C(C({},e),t)}function _(e,t,n){var a,r,o=e.marks.inline_styles;return{name:"inline_styles_className_"+t,label:n,displayLabel:c.a.createElement("span",{className:t},n),apply:(a=o,r={class:t},function(e,t){var n=e.selection,o=n.$cursor,i=n.ranges;if(t)if(o)if(a.isInSet(e.storedMarks||o.marks())){var l=function(e,t){var n=e.selection.$cursor;if(n)return(e.storedMarks||n.marks()).find((function(e){return e.type===t}))}(e,a);t(e.tr.removeStoredMark(a)),l&&t(e.tr.addStoredMark(a.create(x(l.attrs,r))))}else t(e.tr.addStoredMark(a.create(r)));else{for(var s=!1,c=e.tr,u=0;!s&&u<i.length;u++){var d=i[u],p=d.$from,f=d.$to;s=e.doc.rangeHasMark(p.pos,f.pos,a)}for(var m=0,h=i;m<h.length;m++){var g=h[m],b=g.$from,v=g.$to;if(s){var y=C({},O(e,b.pos,v.pos,a).attrs);c.removeMark(b.pos,v.pos,a),c.addMark(b.pos,v.pos,a.create(x(y,r)))}else c.addMark(b.pos,v.pos,a.create(r))}t(c.scrollIntoView())}return!0}),isEnabled:function(e){return!0},isActive:function(e){return function(e,t,n){var a=e.selection,r=a.from,o=a.$from,i=a.to;return a.empty?!!t.isInSet(e.storedMarks||o.marks())&&(e.storedMarks||o.marks()).filter(n).length>0:function(e,t,n,a,r){var o=!1;return n>t&&e.nodesBetween(t,n,(function(e){return a.isInSet(e.marks)&&e.marks.filter(r).length>0&&(o=!0),!o})),o}(e.doc,r,i,t,n)}(e,o,(function(e){return e.attrs.class===t}))}}}var S={inline_styles:{open:function(e,t,n,a){var r={};t.attrs.class&&(r.class=t.attrs.class);var o=Object.keys(r).map((function(e){return e+'="'+r[e]+'"'})).join(" ");return o.length>0?"<span "+o+">":"<span>"},close:"</span>"}},j=new RegExp("^(?:<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>|<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>)"),T=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"].join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(j.source+"\\s*$"),/^$/,!1]];function I(e,t,n,a){var r,o,i,l,s=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(s))return!1;for(l=e.src.slice(s,c),r=0;r<T.length&&!T[r][0].test(l);r++);if(r===T.length)return!1;if(a)return T[r][2];if(o=t+1,!T[r][1].test(l))for(;o<n&&!(e.sCount[o]<e.blkIndent);o++)if(s=e.bMarks[o]+e.tShift[o],c=e.eMarks[o],l=e.src.slice(s,c),T[r][1].test(l)){0!==l.length&&o++;break}var u=e.getLines(t,o,e.blkIndent,!0),d=(new DOMParser).parseFromString(u,"text/html").body.firstChild,p=null==d?"":d.innerHTML;return e.line=o,(i=e.push("html_block_open","",1)).meta={tag:d.tagName,attrs:Array.from(d.attributes)},i.map=[t,e.line],(i=e.push("inline","",0)).map=[t,o],i.content=p,i.children=[],(i=e.push("html_block_close","",-1)).meta={tag:d.tagName},!0}function A(e,t){var n=e.pos;if("&shy;"!==e.src.slice(n,n+5))return!1;if(!t){var a=e.src.slice(n,n+5),r=e.push("soft_hyphen","shy",0);r.attrs=[],r.content=a}return e.pos=n+5,!0}var D={group:"inline",inline:!0,parseDOM:[{tag:"span[data-shy]",getAttrs:function(e){return{}}}],toDOM:function(e){return["span",{"data-shy":!0},"-"]}},L=n(295);var N={soft_hyphen:function(e,t){e.write("&shy;")}},F=function(){return(F=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},B=n(65),M=n(97),R=n(235).markdownItTable;function z(e,t){var n=M("commonmark",{html:!0});n.use(R),n.inline.ruler.before("text","soft_hyphen",A),n.block.ruler.before("html_block","html_block",I);var r=new B.MarkdownParser(e,n,F(F({},B.defaultMarkdownParser.tokens),{anchor:{node:"anchor",getAttrs:function(e){return{value:e.attrGet("value")}}},fence:{block:"code_block",getAttrs:function(e){return{params:e.info||""}},noCloseToken:!0},soft_hyphen:{node:"soft_hyphen"},table:{block:"table"},th:{block:"table_header",getAttrs:function(e){return{style:e.attrGet("style")}}},tr:{block:"table_row"},td:{block:"table_cell",getAttrs:function(e){return{style:e.attrGet("style")}}}}));r.tokenHandlers.html_inline=function(t,n){if(n&&n.content){var a=(n.content||"").trim();if(a.startsWith("<span")&&a.endsWith(">")){if(!(o=(new DOMParser).parseFromString(n.content,"text/html").body.firstChild))return;if("span"===o.nodeName.toLowerCase()){var r=o.getAttribute("class");t.openMark(e.marks.inline_styles.create({class:r}))}}else if("</span>"===a)t.closeMark(e.marks.inline_styles);else if(a.startsWith("<a")&&a.endsWith(">")){var o;if(!(o=(new DOMParser).parseFromString(n.content,"text/html").body.firstChild))return;if("a"===o.nodeName.toLowerCase()){var i=o.getAttribute("id");null!=i&&t.addNode(e.nodes.anchor,{value:i})}}else"<br>"===a&&t.addNode(e.nodes.hard_break)}};var o=new Map([["P","paragraph"],["H1","heading"],["H2","heading"],["H3","heading"],["H4","heading"],["H5","heading"],["H6","heading"]]),i=new Map([["amp-align-left","left"],["amp-align-center","center"],["amp-align-right","right"],["amp-align-justify","justify"]]);return r.tokenHandlers.html_block_open=function(n,r){if(o.has(r.meta.tag)){var l=r.meta.attrs.find((function(e){return"style"===e.name})),s="left";l&&(s=l.ownerElement.style.textAlign||s);var c=r.meta.attrs.find((function(e){return"class"===e.name}));c&&c.ownerElement.classList.forEach((function(e){var n=Object(a.getDefaultClass)(e,t);s=i.get(n)||"left"}));var u=o.get(r.meta.tag),d="heading"===u?Number(r.meta.tag[1]):void 0;n.openNode(e.nodes[u],{align:s||"left",level:d})}},r.tokenHandlers.html_block_close=function(e,t){o.has(t.meta.tag)&&e.closeNode()},r}var P={content:"inline*",attrs:{align:{default:"left"}},group:"block",parseDOM:[{tag:"p",getAttrs:function(e){return{align:e.style.textAlign}}}],toDOM:function(e){return["p",{style:"text-align: "+(e.attrs.align||"left")},0]}};function W(e){return function(t){return{align:t.style.textAlign,level:e}}}var V={attrs:{level:{default:1},align:{default:"left"}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:W(1)},{tag:"h2",getAttrs:W(2)},{tag:"h3",getAttrs:W(3)},{tag:"h4",getAttrs:W(4)},{tag:"h5",getAttrs:W(5)},{tag:"h6",getAttrs:W(6)}],toDOM:function(e){return["h"+e.attrs.level,{style:"text-align: "+(e.attrs.align||"left")},0]}};var U={table:function(e,t){for(var n=[],a=0;a<t.childCount;a++){var r=t.maybeChild(a);null!=r&&"table_row"===r.type.name&&n.push(r)}if(0!==n.length){e.render(n[0]);var o=n[0].childCount;e.write("\n");for(a=0;a<o;a++)e.write("|----------");e.write("|");for(a=1;a<n.length;a++)e.write("\n"),e.render(n[a]);e.closeBlock(t)}},table_row:function(e,t){e.write("| ");for(var n=function(n){var a=t.maybeChild(n);null!=a&&(n>0&&e.write(" | "),function(e,t){var n=e.out.length;t(),e.out=e.out.substr(0,n)+e.out.substr(n).trimEnd().replace(/\\?\n/g,"<br>").padEnd(8," "),e.closed=!1}(e,(function(){e.renderInline(a)})))},a=0;a<t.childCount;a++)n(a);e.write(" |")},table_cell:function(e,t){e.renderInline(t)},table_header:function(e,t){e.renderInline(t)}},G=function(){return(G=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},H=n(65);var $={text:function(e,t){e.text(function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(t.text))}};function J(e,t){return void 0===t&&(t={}),new H.MarkdownSerializer(G(G(G(G(G(G(G(G({},H.defaultMarkdownSerializer.nodes),N),k),U),function(e){return{paragraph:function(t,n){n.attrs.align&&"left"!==n.attrs.align&&"start"!==n.attrs.align?(e.useClasses?t.write('<p class="'+Object(a.getCustomClass)("amp-align-"+n.attrs.align,e)+'">'):t.write('<p style="text-align: '+n.attrs.align+'">'),t.renderInline(n),t.write("</p>"),t.closeBlock(n)):(t.renderInline(n),t.closeBlock(n))}}}(e)),function(e){return{heading:function(t,n){n.attrs.align&&"left"!==n.attrs.align&&"start"!==n.attrs.align?(e.useClasses?t.write("<h"+n.attrs.level+' class="'+Object(a.getCustomClass)("amp-align-"+n.attrs.align,e)+'">'):t.write("<h"+n.attrs.level+' style="text-align: '+n.attrs.align+'">'),t.renderInline(n),t.write("</h"+n.attrs.level+">"),t.closeBlock(n)):(t.write(t.repeat("#",n.attrs.level)+" "),t.renderInline(n),t.closeBlock(n))}}}(e)),$),t),G(G({},H.defaultMarkdownSerializer.marks),S))}var q=n(44).tableNodes,K=n(3).Schema;var Y=n(296),Z=n(297),X=n(298),Q=n(299),ee=n(300),te=n(301),ne=n(44),ae=n(3).Fragment;function re(e){for(var t=e.selection.$head.path,n=0;n<t.length;n+=3)if("table"===t[n].type.name)return!0;return!1}function oe(e,t){return t.create(void 0,ae.fromArray([e.schema.nodes.paragraph.create()]))}function ie(e,t){var n=e.tr.replaceSelectionWith(e.schema.nodes.table.create(void 0,ae.fromArray([e.schema.nodes.table_row.create(void 0,ae.fromArray([oe(e,e.schema.nodes.table_header),oe(e,e.schema.nodes.table_header)])),e.schema.nodes.table_row.create(void 0,ae.fromArray([oe(e,e.schema.nodes.table_cell),oe(e,e.schema.nodes.table_cell)]))])));return t&&t(n),!0}var le=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,r++)a[r]=o[i];return a};function se(e,t){var n=[];return Object(a.isToolEnabled)("inline_styles",t)&&(n=n.concat(n,function(e,t){var n=[];if(e.marks.inline_styles&&Object(a.isToolEnabled)("inline_styles",t)&&t.tools&&t.tools.inline_styles){var r=t.tools.inline_styles;if(r.classNames)for(var o=0,i=r.classNames;o<i.length;o++){var l=i[o];n.push(_(e,l.className,l.label))}}return n}(e,t))),Object(a.isToolEnabled)("anchor",t)&&e.nodes.anchor&&n.push(function(e){return{name:"anchor",label:"Insert Anchor",displayIcon:c.a.createElement(g.a,null),apply:y(e.nodes.anchor),isEnabled:function(t){return Object(a.canInsert)(t,e.nodes.anchor)}}}(e)),Object(a.isToolEnabled)("soft_hyphen",t)&&e.nodes.soft_hyphen&&n.push(function(e){return{name:"soft_hyphen",label:"Insert Soft Hyphen",displayIcon:c.a.createElement(L.a,null),apply:function(t,n){n(t.tr.replaceSelectionWith(e.nodes.soft_hyphen.create()))},isEnabled:function(t){return Object(a.canInsert)(t,e.nodes.soft_hyphen)}}}(e)),Object(a.isToolEnabled)("align_left",t)&&n.push({name:"align_left",label:"Align Left",displayIcon:c.a.createElement(r.a,null),apply:function(e,t){return p(e,t,"left")},isActive:function(e,t){return f(e,0,"left")},isVisible:m}),Object(a.isToolEnabled)("align_center",t)&&n.push({name:"align_center",label:"Align center",displayIcon:c.a.createElement(o.a,null),apply:function(e,t){return p(e,t,"center")},isActive:function(e,t){return f(e,0,"center")},isVisible:m}),Object(a.isToolEnabled)("align_right",t)&&n.push({name:"align_right",label:"Align Right",displayIcon:c.a.createElement(i.a,null),apply:function(e,t){return p(e,t,"right")},isActive:function(e,t){return f(e,0,"right")},isVisible:m}),Object(a.isToolEnabled)("align_justify",t)&&n.push({name:"align_justify",label:"Align Justify",displayIcon:c.a.createElement(l.a,null),apply:function(e,t){return p(e,t,"justify")},isActive:function(e,t){return f(e,0,"justify")},isVisible:m}),e.nodes.table&&(Object(a.isToolEnabled)("table_create",t)&&n.push(function(e){return{name:"table_create",label:"Create Table",displayIcon:c.a.createElement(Y.a,null),apply:ie,isEnabled:function(t){return Object(a.canInsert)(t,e.nodes.table)},isVisible:function(e){return!re(e)}}}(e)),Object(a.isToolEnabled)("table_delete",t)&&n.push({name:"table_delete",label:"Delete Table",displayIcon:c.a.createElement(te.a,null),apply:ne.deleteTable,isVisible:function(e){return re(e)}}),Object(a.isToolEnabled)("table_row_add",t)&&n.push({name:"table_row_add",label:"Add Row",displayIcon:c.a.createElement(Z.a,null),apply:ne.addRowAfter,isVisible:function(e){return re(e)}}),Object(a.isToolEnabled)("table_col_add",t)&&n.push({name:"table_col_add",label:"Add Column",displayIcon:c.a.createElement(X.a,null),apply:ne.addColumnAfter,isVisible:function(e){return re(e)}}),Object(a.isToolEnabled)("table_row_delete",t)&&n.push({name:"table_row_delete",label:"Delete Row",displayIcon:c.a.createElement(Q.a,null),apply:ne.deleteRow,isVisible:function(e){return re(e)}}),Object(a.isToolEnabled)("table_col_delete",t)&&n.push({name:"table_col_delete",label:"Delete Column",displayIcon:c.a.createElement(ee.a,null),apply:ne.deleteColumn,isVisible:function(e){return re(e)}})),n}var ce=function(){function e(e){void 0===e&&(e={}),this.name="markdown",this.label="Markdown";var t=this.createSchema(e),n=le(Object(a.createStandardTools)(t,e),se(t,e)),r=J(e,this.getNodeSerializers()),o=z(t,e);this.schema=t,this.tools=n,this.serializer=r,this.parser=o}return e.prototype.serialize=function(e){return this.serializeMarkdown(e)},e.prototype.parse=function(e){return this.parseMarkdown(e)},e.prototype.serializeMarkdown=function(e){return this.serializer.serialize(e)},e.prototype.canSerializeNodeToMarkdown=function(e,t){return!!t.type&&null!=this.serializer.nodes[t.type]},e.prototype.parseMarkdown=function(e){return e||(e=""),this.parser.parse(e)},e.prototype.getNodeSerializers=function(){return{}},e.prototype.createSchema=function(e){return void 0===e&&(e={}),function(e,t){void 0===t&&(t=!1);var a=n(65).schema,r=a.spec.marks;t&&(r=r.addToEnd("inline_styles",w));var o=a.spec.nodes.append(q({tableGroup:"block",cellContent:"block",cellAttributes:{background:{default:null,getFromDOM:function(e){return e.style.backgroundColor||null},setDOMAttr:function(e,t){e&&(t.style=(t.style||"")+"background-color: "+e+";")}}}})).addToEnd("soft_hyphen",D).addToEnd("anchor",h).update("paragraph",P).update("heading",V);return new K({nodes:o,marks:r})}(0,Object(a.isToolEnabled)("inline_styles",e))},e}(),ue={format:a.RichLanguageFormat.TEXT};t.b=function(e){return{language:new ce(e),conf:ue}}},73:function(e,t,n){"use strict";n(65),n(3).Node;var a=function(){function e(){}return e.prototype.canSerialize=function(e,t){return"dc-image-link"===t.type},e.prototype.serialize=function(e,t){return t.map((function(e){return{type:"dc-image-link",data:e.attrs.value}}))},e.prototype.canParse=function(e,t){return"dc-image-link"===t.type},e.prototype.parse=function(e,t){var n=[];return t.forEach((function(e){n.push({type:"dc-image-link",attrs:{value:e.data}})})),n},e}();t.a=a},74:function(e,t,n){"use strict";var a=n(3).Node,r=function(){function e(e,t){this.options=e,this.markdownLanguage=t}return e.prototype.canSerialize=function(e,t){return this.markdownLanguage.canSerializeNodeToMarkdown(e,t)},e.prototype.serialize=function(e,t){var n=a.fromJSON(e,{type:"doc",content:t});return[{type:"markdown",data:this.markdownLanguage.serializeMarkdown(n)}]},e.prototype.canParse=function(e,t){return"markdown"===t.type},e.prototype.parse=function(e,t){var n=this,a=[];return t.forEach((function(e){var t=n.markdownLanguage.parseMarkdown(e.data||"").toJSON();a=a.concat.apply(a,t.content||[])})),a},e}();t.a=r},75:function(e,t,n){"use strict";var a={format:n(10).RichLanguageFormat.JSON};t.a=a},76:function(e,t,n){"use strict";var a=n(58),r=n(56),o=(n(65),n(3).Node,function(){function e(){}return e.prototype.canSerialize=function(e,t){return"dc-content-link"===t.type},e.prototype.serialize=function(e,t){return t.map((function(e){return{type:"dc-content-link",data:e.attrs.value}}))},e.prototype.canParse=function(e,t){return"dc-content-link"===t.type},e.prototype.parse=function(e,t){var n=[];return t.forEach((function(e){n.push({type:"dc-content-link",attrs:{value:e.data}})})),n},e}()),i=n(73),l=n(74),s=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,r++)a[r]=o[i];return a},u=n(3).Schema,d=n(3).Node,p=function(e){function t(t,n){void 0===t&&(t={});var a=e.call(this,t)||this;return a.name="json",a.label="JSON",a.markdownBlock=new l.a(t,a),a.blockTypes=n||[new i.a,new o,a.markdownBlock],a.tools=c(a.tools,Object(r.e)(a.schema,t)),a}return s(t,e),t.prototype.serialize=function(e){var t=this;if(!e)return[];if(!(e=e.toJSON()).content||0===e.content.length)return[];for(var n=f(e.content,(function(e){for(var n=0,a=t.blockTypes;n<a.length;n++){var r=a[n];if(r.canSerialize(t.schema,e))return r}})),a=[],r=0,o=n;r<o.length;r++){var i=o[r],l=i.group.serialize(this.schema,i.items);a=a.concat.apply(a,l)}return a},t.prototype.parse=function(e){var t=this;if(!e||0===e.length)return d.fromJSON(this.schema,{type:"doc",content:[{type:"paragraph"}]});for(var n={type:"doc",content:[]},a=f(e,(function(e){for(var n=0,a=t.blockTypes;n<a.length;n++){var r=a[n];if(r.canParse(t.schema,e))return r}})),r=0,o=a;r<o.length;r++){var i=o[r],l=i.group.parse(this.schema,i.items);n.content=n.content.concat.apply(n.content,l)}return d.fromJSON(this.schema,n)},t.prototype.createSchema=function(t){var n=e.prototype.createSchema.call(this,t);return new u({nodes:n.spec.nodes.addBefore("image","dc-image-link",Object(r.c)()).addBefore("image","dc-content-link",Object(r.a)()),marks:n.spec.marks})},t.prototype.getNodeSerializers=function(){return{"dc-image-link":function(){return""},"dc-content-link":function(){return""}}},t}(a.a);t.a=p;function f(e,t){for(var n=[],a=null,r=[],o=0,i=e;o<i.length;o++){var l=i[o],s=t(l);void 0!==s&&(null===a?(a=s,r=[l]):a===s?r.push(l):(r.length>0&&n.push({group:a,items:r}),a=s,r=[l]))}return r.length>0&&null!==a&&n.push({group:a,items:r}),n}}},[[167,1,2]]]);
//# sourceMappingURL=main.712a67f2.chunk.js.map